Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project lead id,Project description,Project url,Priority,Resolution,Assignee,Assignee Id,Reporter,Reporter Id,Creator,Creator Id,Created,Updated,Last Viewed,Resolved,Affects versions,Fix versions,Fix versions,Components,Components,Due date,Votes,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers Id,Watchers Id,Watchers Id,Watchers Id,Watchers Id,Watchers Id,Watchers Id,Original estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Outward issue link (Blocks),Inward issue link (Duplicate),Outward issue link (Duplicate),Inward issue link (Issue split),Inward issue link (PartOf),Inward issue link (PartOf),Outward issue link (PartOf),Outward issue link (Problem/Incident),Inward issue link (Relates),Inward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Account Name),Custom field (Actual end),Custom field (Actual start),Custom field (Affected hardware),Custom field (Affected services),Custom field (Approvals),Custom field (Atlassian project),Custom field (Atlassian project status),Custom field (Author),Custom field (Background),Custom field (Backout plan),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Budget),Custom field (Build Tag),Custom field (Business Value),Custom field (Business Value (migrated)),Custom field (Category),Custom field (Cause of nonconformity:),Custom field (Change Details),Custom field (Change completion date),Custom field (Change reason),Custom field (Change reason (migrated)),Custom field (Change risk),Custom field (Change risk (migrated)),Custom field (Change start date),Custom field (Change type),Custom field (Change type (migrated)),Custom field (Channel Name),Custom field (Cloud Project ID),Custom field (Cloud Region),Custom field (Comments),Custom field (Contact Email),Custom field (Contact Name),Custom field (Content type),Custom field (Content type),Custom field (Contract Name),Custom field (Contractor Purpose),Custom field (Corrective action to be implemented:),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Cost),Custom field (Current Environment),Custom field (Customer Name),Custom field (Customer Stakeholders),Custom field (Customer Support Ticket),Custom field (Delivery progress),Custom field (Delivery status),Custom field (Department),Custom field (Department),Custom field (Department),Custom field (Department),Custom field (Department Affected),Custom field (Development),Custom field (Device Name),Custom field (Device Ownership),Custom field (Difficulty),Custom field (Difficulty),Custom field (Documentation),Custom field (Does similar nonconformity already exist?),Custom field (Due Date),Custom field (Due date),Custom field (Email Handling),Custom field (Emails to add),Custom field (Employee Name),Custom field (Employee Type),Custom field (End Date),Custom field (Epic Color),Custom field (Epic Name),Custom field (Epic Progress Link),Custom field (Epic Status),Custom field (Estimated Frequency),Custom field (Estimated Usage),Custom field (Expected Environment),Custom field (External issue ID (migrated 4)),Custom field (External issue ID (migrated 6)),Custom field (External issue ID (migrated 7)),Custom field (Extra Lists),Custom field (Focus Areas),Custom field (Focus Keyword(s)),Custom field (Goals),Custom field (Goals),Custom field (Idea archived),Custom field (Idea archived on),Custom field (Impact),Custom field (Impact),Custom field (Impact),Custom field (Impact (migrated)),Custom field (Implementation Ticket / Github Link),Custom field (Implementation plan),Custom field (Insights),Custom field (Investigation reason),Custom field (Issue color),Custom field (Job Title),Custom field (Level of Difficulty Estimate),Custom field (Likelihood),Custom field (Linked items),Custom field (Locked forms),Custom field (Major incident),Custom field (Manager),Custom field (Marketing campaign),Custom field (Nonconformity identified on:),Custom field (Nonconformity source:),Custom field (Open forms),Custom field (Operating System),Custom field (Opportunity URL),Custom field (Overview Status ),Custom field (Overview Status Description),Custom field (Party Name),Custom field (Pending reason),Custom field (Personal Email),Custom field (Planned end),Custom field (Planned start),Custom field (Platform),Custom field (Primary Email),Custom field (Priority level),Custom field (Product Owner),Custom field (Productboard URL),Custom field (Project overview key),Custom field (Project overview status),Custom field (Publication date),Custom field (Publication date),Custom field (Python Version),Custom field (QA Assignee),Custom field (QA Assignee)Id,Custom field (QA Cert Versions),Custom field (QA Estimate),Custom field (QA Support),Custom field (QA Support)Id,Custom field (Rank),Custom field (Rank (Obsolete)),Custom field (Release Notes),Custom field (Release Tag),Custom field (Remediation Plan),Custom field (Reports To),Custom field (Request Type),Custom field (Request language),Custom field (Request participants),Custom field (Requirement Document),Custom field (Responders),Custom field (Reviewer),Custom field (Risk Rating),Custom field (Risk Rating),Custom field (Risk Treatment),Custom field (Risk and Impact Analysis),Custom field (Rollback Tag),Custom field (Root cause),Custom field (SBO Request Type),Custom field (Salesforce Opportunity Link),Satisfaction rating,Custom field (Satisfaction date),Custom field (Scheduled Date),Custom field (Sentiment),Custom field (Server / System access),Custom field (Severity),Custom field (Severity),Custom field (Short Description),Custom field (SkySQL Billing Number),Custom field (Slack Channels),Custom field (Source),Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Custom field (Start date),Custom field (Status Summary),Custom field (Story Points),Custom field (Story point estimate),Custom field (Submitted forms),Custom field (Support case ID),Custom field (Systems Affected ),Custom field (TTR 24/7),Custom field (TTR Business Hours),Custom field (Target end),Custom field (Target start),Team Id,Team Name,Custom field (Test plan),Custom field (Time to close after resolution),Custom field (Time to done),Custom field (Time to first response),Custom field (Time to resolution),Custom field (Time to review normal change),Custom field (Total forms),Custom field (Transfer Files To),Custom field (Type),Custom field (Type),Custom field (URL of content to review),Custom field (Urgency),Custom field (Use Case),Custom field (Vulnerability),Custom field (Work category),Custom field (Workaround),Custom field ([CHART] Date of First Response),Custom field ([CHART] Date of First Response (migrated 2)),Custom field ([CHART] Date of First Response (migrated)),Custom field ([CHART] Time in Status),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Parent,Parent key,Parent summary,Status Category,Status Category Changed
"View list of database nodes with metrics collected, Select nodes and report options for generating reports",SAS-75,254980,Story,Done,SAS,Support & Services,software,Ben Stillman,557058:b69ec727-8802-427c-9ed3-6ca5c00f13ea,,,Major,Done,Nirav Upadhyay,712020:1a462e2d-b6e7-4a04-81a2-4a5b8451d98d,Nirav Upadhyay,712020:1a462e2d-b6e7-4a04-81a2-4a5b8451d98d,Nirav Upadhyay,712020:1a462e2d-b6e7-4a04-81a2-4a5b8451d98d,05/Dec/25 11:51 AM,12/Dec/25 10:05 AM,,12/Dec/25 10:05 AM,,,,,,12/Dec/25 12:00 AM,0,health-check-reports,mariadb-health-check,,,"As MariaDB health check platform user, I want to view all the database nodes for which metrics have been collected along with their basic info. such as Node name, IP, MariaDB version, Health summary etc. displayed on the tool’s Dashboard web-page. Along with that I want ability to select reports to generate for each node or for all the nodes combined.

*Database Nodes List Display:*

* Dashboard displays all database nodes that have metrics collected (.mdbs files)
* Each node card/row shows:
** Node name
** IP address
** MariaDB version / MaxScale version
** Overall Health Summary with some health status indicator
* Nodes are displayed in a grid (card view) or table format

*Report Selection:*

* Each node card has a ""Generate Reports"" button or dropdown
* Clicking the button shows a list of all available report types:
** Configuration Details (Appendix A)
** Slow Query Log Analysis (Appendix B)
** Security Analysis (Appendix C)
** Dataset Analysis (Appendix D)
** Galera Cluster Analysis (Appendix G)
** MaxScale Analysis (Appendix M)
** ColumnStore Analysis (Appendix CS)
** Performance & Security Audit (Extended)
** Sales Health Check (Metrics-Based)
** Sales Health Check (Text Input)
* User can select one or multiple reports to generate
* Selected reports are generated and displayed in a new view
* Option to ""Generate All Reports"" for a node
* Tooltips explaining each report type

*Search and Filter:*

* Search box to filter nodes by Name or IP address
* Filter by MariaDB version / MaxScale version (dropdown)
* Sort nodes by name, version
* Future ability to filter by other criteria",,Nirav Upadhyay,,,,,,,712020:1a462e2d-b6e7-4a04-81a2-4a5b8451d98d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@37cb537e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"{pullrequest={dataType=pullrequest, state=MERGED, stateCount=1}, json={""cachedValue"":{""errors"":[],""summary"":{""pullrequest"":{""overall"":{""count"":1,""lastUpdated"":""2025-12-15T13:35:59.000-0800"",""stateCount"":1,""state"":""MERGED"",""dataType"":""pullrequest"",""open"":false},""byInstanceType"":{""GitHub"":{""count"":1,""name"":""GitHub""}}}}},""isStale"":true}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i03eo7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,01/Dec/25 12:00 AM,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10507_*:*_1_*:*_7708_*|*_10508_*:*_1_*:*_0,"12/Dec/25 10:05 AM;712020:1a462e2d-b6e7-4a04-81a2-4a5b8451d98d;h3. Story Completed

Both subtasks are completed and marked Done:
- SAS-76 - Dashboard UI and API endpoint
- SAS-77 - Report Selection UI with multi-selection

Key deliverables:

* Dashboard with node cards and health metrics summary prepared from SQLite (.mdbs) files
* Multi-node and multi-report selection
* Consolidated/Individual report generation options
* Search, filter, and sort nodes functionality
* Node management (add/remove)

GitHub Branch: [feature/SAS-75-nodes-dashboard-and-report-generation|https://github.com/mariadb-corporation/mariadb-healthcheck-framework/tree/feature%2FSAS-75-nodes-dashboard-and-report-generation]

Tagging [~accountid:712020:f33537b3-e5b2-493e-aaf7-893a5bc56a1b] for review.",,,,,,,,,,,,,,,,,,,,,,,,,253052,SAS-48,MariaDB Health Check Framework - Web Based Analyzer and Reporting Engine,Done,12/Dec/25 10:05 AM
Fluentbit installer,SAS-36,241775,Task,Backlog,SAS,Support & Services,software,Ben Stillman,557058:b69ec727-8802-427c-9ed3-6ca5c00f13ea,,,Major,,Richard Bensley,712020:d450cb79-7c79-439c-9f6e-e8179ec8efd9,Richard Bensley,712020:d450cb79-7c79-439c-9f6e-e8179ec8efd9,Richard Bensley,712020:d450cb79-7c79-439c-9f6e-e8179ec8efd9,10/Apr/25 6:21 AM,10/Apr/25 6:21 AM,,,,,,,,,0,Columnstore,Logging,monitoring,RDBA,"*What?*

Either fork and modify or create a new fluent-bit installer to aggregate logs on RDBA supported hosts.

*Why?*

We are still logging into individual hosts to retrieve and analyze log data. While tools like the columnstore review script does a great job at creating an analytical snapshot, we could be a lot more proactive and start streaming logs not only to make reading logs easier, but to start applying custom filters to catch errors in advance. A more proactive approach.

Having an aggregated log of all logs enabled on a supported host would allow us to create tools and alerts around a single stream of log data.

*How?*

* Create/fork an install script to install , configure, and run Fluent-bit. The tool should pickup and configure log paths which are already in use on the host such as slow query log, error log, debug logs, etc.
* Start with two outputs:
** stdout for an aggregated stream of all logs on the host
** Forward output to the jumphost/monyog host/s3; this stream should be filtered initially to be a set of errors only while bandwidth and data storage requirements are calculated.",,Richard Bensley,,,,,,,712020:d450cb79-7c79-439c-9f6e-e8179ec8efd9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@f953524,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i010r1:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,80d96acb-41b5-45a3-b3d8-58574191888c,RDBA,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,10/Apr/25 6:21 AM
RETEST spiky TPS with large number of slices ,PERF-422,233673,Task,Closed,PERF,Performance Engineering,software,Julien Fritsch,557058:4f8c273b-66e4-4ef7-8f81-4950535d4170,,,Major,Won't Do,Axel Schwenke,557058:81a44b65-5428-471a-ad68-9cbd90808349,Christine Lieu,5ba2f5f21a21b82e9bea1631,Christine Lieu,5ba2f5f21a21b82e9bea1631,13/Sep/23 9:41 AM,04/Apr/24 12:08 PM,,04/Apr/24 12:08 PM,,,,,,,0,,,,,"The goal of this exercise is to RETEST the results from [a previous study of the number of slices on a table | https://drive.google.com/file/d/15dfGjO_MX60gVgOpZXweKOX4LiAPZqoS/view?usp=sharing ]. 

The following sysbench options were used previously: ­­
{noformat}
oltp-­table-­size=40000000 ­­oltp­-point-­selects=20 ­­oltp­-range­-selects=off ­­oltp-­index­updates=1 ­­oltp­-non-­index-
updates=0 ­­oltp­-delete-­inserts=0 ­­oltp­-dist-­type=uniform ­­num­-threads=1024
{noformat}

* The test should be performed on a 4 node cluster (32 cores), running a recent version of Xpand (mainline1, not a GA release, at least to start), 
* The data size should be around 40M records (approx 20GB of data)
* In addition to the data needed to draw graphs similar to those in the previous study, we should also collect:
** slow query logs 
** average latency
** P90 latency
** CPU utilization (database) 
* The following slicing scenarios should be tested (while keeping the cluster and database sizes relatively constant):
** 4 slices (default)
** 32 slices
** 128 slices
** 256 slices
** 512 slices
** 1024 slices",,Axel Schwenke,Christine Lieu,Julien Fritsch,,,,,557058:81a44b65-5428-471a-ad68-9cbd90808349,5ba2f5f21a21b82e9bea1631,557058:4f8c273b-66e4-4ef7-8f81-4950535d4170,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@193791bf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzzunz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PERF - Sprint 2023.07,PERF - 2023.08/09,PERF - Long Term Low P,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2024-03-01 10:18:21.97,2024-03-01 10:18:21.97,2024-03-01 10:18:21.97,6_*:*_1_*:*_0_*|*_10001_*:*_1_*:*_17634436881,01/Mar/24 2:18 AM;557058:4f8c273b-66e4-4ef7-8f81-4950535d4170;[~accountid:557058:81a44b65-5428-471a-ad68-9cbd90808349] is this still needed?,04/Apr/24 12:08 PM;557058:81a44b65-5428-471a-ad68-9cbd90808349;this is Xpand,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,04/Apr/24 12:08 PM
Add query fluent bit config for xpand to match mariadb slow query log output,MDBM-5032,214158,Story,Open,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Critical,,Richard Bensley,5bca82e15c85706a3f096963,Boris Besky,605d5cfe0a9b690071bf673a,Boris Besky,605d5cfe0a9b690071bf673a,12/Jul/23 6:26 AM,12/Jul/23 6:26 AM,,,,SkySQL 2.0 08/23 Release,,,,,0,,,,,Slow queries are only currently available in mariadb instances. We need to have this implemented for Xpand as well.,,Boris Besky,,,,,,,605d5cfe0a9b690071bf673a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@51006dc9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Release bundle on test:
N/A",,,,2|hzzrvr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,
Match fluent bit filter configuration in sky and ros deployments,MDBM-5031,214289,Story,Confirmed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Richard Bensley,5bca82e15c85706a3f096963,Boris Besky,605d5cfe0a9b690071bf673a,Boris Besky,605d5cfe0a9b690071bf673a,12/Jul/23 6:24 AM,03/Oct/23 8:47 AM,,,,SkySQL 2.0 08/23 Release,,Fluent Bit,,,0,,,,,"Currently, deadlocks, slow query parsing, and others are missing from sky config.",,Boris Besky,Richard Bensley,,,,,,605d5cfe0a9b690071bf673a,5bca82e15c85706a3f096963,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1757b07c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Release bundle on test:
N/A",,,,2|hzzrvj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL 2.0 GA Sprint 12,SkySQL 2.0 GA Sprint 13,SkySQL 2.0 GA Sprint 14,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2023-07-28 14:20:21.0,2023-07-28 14:20:21.0,2023-07-28 14:20:21.0,,"28/Jul/23 7:20 AM;5bca82e15c85706a3f096963;Deadlocks are captured by the exporter.

A new docker image needs to be built to include the wasm filters and new parsers.
The exporter (metrics container) needs to be added to the fluentbit config and tagged.
The slow logs need to be configured to use the multiline parser and tagged correctly.
The overall fluentbit config needs to be brought inline with ROS changes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,In Progress,20/Jul/23 5:49 AM
UP: Slow Query Monitor Widget UX recommendation,MDBM-4982,214064,Story,Open,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Prabodh Meshram,615688809cdb9300724224c2,Prabodh Meshram,615688809cdb9300724224c2,Prabodh Meshram,615688809cdb9300724224c2,06/Jun/23 9:25 AM,06/Jun/23 9:25 AM,22/Dec/25 2:12 AM,,,,,SkySQL Portal (Unified),,,0,,,,,"As per the original Implementation of MDBM-4961. Got some valuable feedback from [~accountid:5a72dbf28a7b1d1e8c6433b7] to improve the UX of the Slow query Widget.

Following are her recommendation:

* more space between 'Top Slow Queries' title and column names
* in 'Slow Query Details' modal: column names to be on one line or formatted on two lines",,Dobi Topuzova,Prabodh Meshram,,,,,,5a72dbf28a7b1d1e8c6433b7,615688809cdb9300724224c2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2e71d9b2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Release bundle on test:
N/A",,,,2|hzzptj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,
UP: Top slow queries,MDBM-4962,215968,Story,Re-opened,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Boris Besky,605d5cfe0a9b690071bf673a,Philip Ganchev,5c99466403b8be71089b3f50,Philip Ganchev,5c99466403b8be71089b3f50,23/Mar/23 8:54 AM,01/Jun/23 6:07 AM,,,,SkySQL 2.0 05/23 Release,,SkySQL Observability,SkySQL Portal (Unified),,0,,,,,"We want to surface the top slow queries on the Monitoring dashboards alongside a more detailed view of the slow query logs themselves. 
For the initial release, we'll be parsing and aggregating the information on the client side (UI).

The UI/UX design can be found [HERE|https://www.figma.com/file/mWsMtgelE2ixSNJZU8CpaN/SkySQL-2.0-March-'23-Release---SHARED?node-id=367-5832&t=aLSmgR8znYNHlQsO-0].",,Dobi Topuzova,Philip Ganchev,Prabodh Meshram,,,,,5a72dbf28a7b1d1e8c6433b7,5c99466403b8be71089b3f50,615688809cdb9300724224c2,,,,,,,,,,,,,,,,,,,,,,MDBM-4961,,,,MDBM-4974,,,,24/Mar/23 1:46 AM;thien.ly;logParser_UI_benchmark.mp4;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/29366,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4b23e5c2,,,,,,,,,,,,,,,,,,,v2.10.11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Dobi Topuzova,5a72dbf28a7b1d1e8c6433b7,"Release bundle on test:
N/A",,,,2|hzzjrj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2023-03-24 08:47:14.0,2023-03-24 08:47:14.0,2023-03-24 08:47:14.0,,"24/Mar/23 1:47 AM;5e3579fdcece0d0cad4155aa;The benchmark is recorded in the development build. On average, the parser takes approximately 1.2 seconds for a 1 MB log file ( equivalent to roughly 2000 query logs).
Theoretically, it could be faster in the production build.","24/Mar/23 4:10 AM;5c99466403b8be71089b3f50;[~accountid:5e3579fdcece0d0cad4155aa] Thanks for the benchmarks. A note here, the load times are affected by the client's hardware, so it could be way slower or faster.","29/Mar/23 3:35 AM;5e3579fdcece0d0cad4155aa;For the March release, the slow query widget is hidden. The UI/UX design is also not up to date. For more information, check it here:
https://docs.google.com/document/d/1qlJPBipbIceJRc6cY0eHDQCy_hrSavx90imUWlbFsJE/edit#heading=h.d1rqndop8j92",01/Jun/23 6:07 AM;5a72dbf28a7b1d1e8c6433b7;After clarification from Prabodh (many thanks for your time) this ticket isn't part of the Scope as of now and Top Slow Queries is only visible in the Monitoring Dashboard widgets.,,,,,,,,,,,,,,,,,,,,,,216014,MDBM-3035,Slow Query Browser UI based,To Do,01/Jun/23 6:07 AM
Show query string instead of timestamp in the top slow queries list,MDBM-4961,219321,Story,Closed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Blocker,Fixed,Prabodh Meshram,615688809cdb9300724224c2,Boris Besky,605d5cfe0a9b690071bf673a,Boris Besky,605d5cfe0a9b690071bf673a,25/Apr/23 10:53 AM,29/Jun/23 12:02 AM,,26/May/23 1:47 AM,,SkySQL 2.0 06/23 Release,,SkySQL Observability,SkySQL Portal (Unified),,0,UPMayTriage,,,,"Updated Requirements Per [~accountid:605d5cfe0a9b690071bf673a] in comments:
We need the following columns in the Slow Query Table.
1. query,
2. avg (query_time),
3. execution times (number of times the query was executed),
4. total time (avg query_time * execution time),
5. max (query_time),
6. avg (rows_sent),
7. avg (rows_examined)
I am assuming we can already group slow query log by query, so the avg and max can be calculated.

The query detail row expansion should include a query plan if available, plus an expanded query string.

*Update*

As per the last discussion with [~accountid:605d5cfe0a9b690071bf673a] [~accountid:5e66a51e77d46c0cf93ad5f5] [~accountid:623d06c84a57610068e7d439] [~accountid:5a72dc0fdca0242a1ca8387a] following more items were added to the scope of the existing ask. The only change from the previous ask is to open the query detail in a new modal rather than expanding the row.

* Move the slow query panel to the top
* Enable sorting of the columns
* Change from row expansion to a separate modal for query and query plan details
* Set the max number of rows in the table to 20
* Allow dynamic query substring length depending on the screen size
* Add single quote parameter anonymisation
* Allow query range subsetting based on the time window selected at the top.

",,Bhavin Modi,Boris Besky,Dobi Topuzova,Prabodh Meshram,Venkateswaran Iyer,,,5e66a51e77d46c0cf93ad5f5,605d5cfe0a9b690071bf673a,5a72dbf28a7b1d1e8c6433b7,615688809cdb9300724224c2,623d06c84a57610068e7d439,,,,,,,,,,,,,,,,,,MDBM-4962,MDBM-4942,,,,,,,,,05/Jun/23 10:03 AM;dobrinka.topuzova;Screenshot_206.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/28077,05/Jun/23 10:03 AM;dobrinka.topuzova;Screenshot_207.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/28078,05/Jun/23 10:03 AM;dobrinka.topuzova;Screenshot_208.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/28079,05/Jun/23 10:03 AM;dobrinka.topuzova;Screenshot_209.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/28080,28/Apr/23 12:55 PM;ug:29836520-8493-4f29-9fdb-9450126298d3;top_5_slowest_queries.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/28081,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@45ffa36,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Dobi Topuzova,5a72dbf28a7b1d1e8c6433b7,"Release bundle on test:
Release 2.1.2117
Operator 2.1.2492
MOE v.1.6.0
UI v2.19.7",,,,2|hzzmo7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2023-04-27 09:07:26.0,2023-04-27 09:07:26.0,2023-04-27 09:07:26.0,1_*:*_1_*:*_2297685000_*|*_6_*:*_1_*:*_0_*|*_10045_*:*_1_*:*_336828000_*|*_10100_*:*_1_*:*_893960000_*|*_10102_*:*_1_*:*_2037354000_*|*_10017_*:*_1_*:*_11133000,"27/Apr/23 2:07 AM;615688809cdb9300724224c2;There is no direction for this change to be implemented. As discussed with [~accountid:5e3579fdcece0d0cad4155aa] the change that is requested is not at all visible in the UI and there is still confusion about whether we want to enable the query table or not, and even the UX is confusing.

As the original feature owner is Thien, I've very less context on the changes required, so I am unassigning this one till the requirements are clear to proceed.","28/Apr/23 12:55 PM;623d06c84a57610068e7d439;Pasting the notes from JIRA out here:

Jags
  9:31 AM
So, how easy or difficult would be to show the actual query ... to me, the view with when slow query occurred but not being able to see a snippet of the query is meaningless. I don't quite understand the fields either. What is Host ? It is of no value in our world, no ? Most relevant would be:
Show me the query
Execution time for the query (sorted desc on this)
How often is it being executed
How many rows does it return.
@Bhavin
 - do you have PRD that describes this ? 
@sk

@Prabodh
 
@venkat.iyer
 
@Boris Besky
 - for now, anything we can do so it is available for OpenWorks demo is good. We ought to be able to claim this feature.


Thien Ly
:beach_with_umbrella:  9:39 AM
I think the problem we're having is the UX. It's a bit confusing.
First confusing issue is that we're trying to combine both view mode and download mode. We have checkbox for choosing multiple logs to download at once. But for view mode, it's only sensible to view one file at once.
If we show log entries of a slow query log file. This UI conflicts with the download mode. It also gives more works for Prabodh to do.
So my suggestion is that we keep the top 5 slowest  ""widget"" (determined by query time) in the dashboard.  Replace the ""Time"" column with ""Query"". Then Mousing over a query will show the raw log entry of that one. This would be the fastest and easiest change that Prabodh can handle without me being involved.
top_5_slowest_queries.png
 
top_5_slowest_queries.png

Jags
  9:57 AM
Is the current state available in Dev env ?

Thien Ly
:beach_with_umbrella:  10:00 AM
No, anything related to parsing slow query log was removed from the source code. The widget part can be added back easily.

Jags
  10:04 AM
I would remove all the fields like host, lock time, rows sent and give more real estate to display the query. Have the rest in the details page.

Bhavin
  10:11 AM
@Jags
 host, user info is important to identify if someone connected with a sql client from outside Sky and ran queries.
10:12
I agree with you on highlighting the query.

Jags
  10:30 AM
The view should aggregate the queries. the DB is serving OLTP apps ... the same expensive query will likely be executed from many different connections. Summarizing what is causing the load is important. Else, you will likely see the same query repeated hundreds of times.
Here is the CloudSQL insights view I like. This is quite ditto RDS PerfInsights. Not sure who copied whom. Looks for 'Filter by Queries' (edited) 
Google CloudGoogle Cloud
Use Query insights to improve query performance  |  Cloud SQL for PostgreSQL  |  Google Cloud (17 kB)
https://cloud.google.com/sql/docs/postgres/using-query-insights

Jags
  10:32 AM
For now, can we take the shortest path to get something out there (tag it Preview). Unless, it is too awkward. You guys decide. I need to know by Friday what can make it for OW. 
@venkat.iyer
 - is there some cut off date for the OW release?

Bhavin
  10:33 AM
Our plan was to get what we have out there before OW with minor improvements




","01/May/23 8:18 PM;623d06c84a57610068e7d439;[~accountid:5e66a51e77d46c0cf93ad5f5], [~accountid:605d5cfe0a9b690071bf673a], please add the details that you have discussed with Prabodh. Do we have a document with the details or a UX? If so please attach here","16/May/23 10:50 PM;605d5cfe0a9b690071bf673a;[~accountid:615688809cdb9300724224c2], we want to show 
1. query, 
2. avg (query_time), 
3. execution times (number of times the query was executed), 
4. total time (avg query_time * execution time), 
5. max (query_time), 
6. avg (rows_sent), 
7. avg (rows_examined)
I am assuming we can already group slow query log by query, so the avg and max can be calculated.
The query detail row expansion should include a query plan if available, plus an expanded query string.","26/May/23 1:52 AM;615688809cdb9300724224c2;Changes added as per app version v2.18.8

Portal Demo of the changes:

https://drive.google.com/file/d/1bWFPASH8wr2x4lD04-ApAKPocwOqNzwu/view?usp=sharing","05/Jun/23 10:06 AM;5a72dbf28a7b1d1e8c6433b7;Thanks [~accountid:615688809cdb9300724224c2] Items in the description are implemented.
 !Screenshot_206.png|thumbnail!   !Screenshot_207.png|thumbnail!   !Screenshot_208.png|thumbnail!   !Screenshot_209.png|thumbnail! 

Recommendations: 
- more space between 'Top Slow Queries' title and column names
- in 'Slow Query Details' modal: column names to be on one line or formatted on two lines","06/Jun/23 9:26 AM;615688809cdb9300724224c2;Hey [~accountid:5a72dbf28a7b1d1e8c6433b7],
Thanks for verifying this. 
Also, I'll take care of the UX feedback in MDBM-4982",29/Jun/23 12:02 AM;615688809cdb9300724224c2;Closing this one out as it's deployed on Production,,,,,,,,,,,,,,,,,,216014,MDBM-3035,Slow Query Browser UI based,Done,05/Jun/23 10:06 AM
Slow query support,MDBM-4827,214128,Story,Stalled,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Zsolt Kormany,639912c276fb74a95142525c,Zsolt Kormany,639912c276fb74a95142525c,Zsolt Kormany,639912c276fb74a95142525c,27/Mar/23 11:51 PM,03/Oct/23 8:47 AM,,,,ROS 1.5,SkySQL 2.0 06/23 Release,,,,0,,,,,"h1. Description
We need to display a list of

# Recent slow queries
-# Currently running queries-
# The queries should be categorized for filtering
( Inserts, Updates, Deletes, Selects, Joins, Tables included in the query)
The data for those queries should be retrieved every 30 seconds or less.
We should keep snapshots of those lists for the last hour.

Implement data store and exporter for the list of long-running queries

Properties required for each query:

* Query - Query Script
* Time - time running
* User - user@domain of the requestor
* Type - Type of the query (SELECT, INSERT, UPDATE, DELETE)
* Database - Database
* Lock Time == Latency
* Query Plan (if the user enabled it)

Not for initial implementation but later:
- Tags (Categorize the queries by tags (parse query comments for tags)) Tags are key value pairs generated by sqlcommenter. Here is the reference. 

Most likely not needed:
- Joins (because it is included in the query plan)

h2. Acceptance
A PR, containing implementation for the listing of the long-running queries",,Richard Bensley,Zsolt Kormany,,,,,,5bca82e15c85706a3f096963,639912c276fb74a95142525c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3c1b7988,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Release bundle on test:
N/A",,,,2|hzzjzj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL 2.0 GA Sprint 9,SkySQL 2.0 GA Sprint 10,SkySQL 2.0 GA Sprint 11,SkySQL 2.0 GA Sprint 12,SkySQL 2.0 GA Sprint 13,SkySQL 2.0 GA Sprint 14,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,215941,MDBM-4814,Slow Query Browser Backend,In Progress,27/Mar/23 11:52 PM
Slow Query Browser Backend,MDBM-4814,215941,Epic,In Progress,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Zsolt Kormany,639912c276fb74a95142525c,Bhavin Modi,5e66a51e77d46c0cf93ad5f5,Bhavin Modi,5e66a51e77d46c0cf93ad5f5,22/Mar/23 2:58 PM,13/Jun/23 2:25 PM,,,,ROS 1.5,SkySQL 2.0 06/23 Release,Monitoring Components,,,0,pmskysql2.0,,,,"Slow query logs API that returns pre-processed information for Slow query browser UI.

Original ticket: https://jira.mariadb.org/browse/MDBM-510

Description:


h1. Description
We need to display a list of

# Recent slow queries
# Currently running queries
# The queries should be categorized for filtering
( Inserts, Updates, Deletes, Selects, Joins, Tables included in the query)
The data for those queries should be retrieved every 30 seconds or less.
We should keep snapshots of those lists for the last hour.

Implement data store and exporter for the list of long-running queries

Properties required for each query:

* Query - Query Script
* Time - time running
* User - user@domain of the requestor
* Type - Type of the query (SELECT, INSERT, UPDATE, DELETE)
* Joins
* Database - Database
* Latency
* Categorize the queries by tags (parse query comments for tags)

h2. Acceptance
A PR, containing implementation for the listing of the long-running queries",,Bhavin Modi,,,,,,,5e66a51e77d46c0cf93ad5f5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3059349e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-6,Slow Query Browser backend processing,,To Do,,,,,,,,,,,,,,,,,,,,,,green,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Release bundle on test:
N/A",,,,2|hzzjo7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,213553,MDBM-2601,Database Query Tools 2,In Progress,27/Mar/23 11:48 PM
Allow pulling of slow/audit logs,MDBM-4784,219299,New Feature,Closed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Fixed,Boris Besky,605d5cfe0a9b690071bf673a,Bryan Bancroft,712020:e591c7db-16a8-44cc-bad0-ae774f9b627d,Bryan Bancroft,712020:e591c7db-16a8-44cc-bad0-ae774f9b627d,10/Mar/23 12:39 PM,21/Mar/23 10:54 AM,,21/Mar/23 10:54 AM,,Sky 2.0 Mar GA,,agent-manager,skysql-logs,,0,,,,,Same as the ability to read a error log this should allow for reading the slow query log and audit log if selected.,,Boris Besky,Bryan Bancroft,,,,,,605d5cfe0a9b690071bf673a,712020:e591c7db-16a8-44cc-bad0-ae774f9b627d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@68a5d681,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Release bundle on test:
N/A",,,,2|hzziin:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2023-03-21 17:54:00.0,2023-03-21 17:54:00.0,2023-03-21 17:54:00.0,1_*:*_1_*:*_940494000_*|*_6_*:*_1_*:*_0,21/Mar/23 10:54 AM;605d5cfe0a9b690071bf673a;addressed in MDBM-4723,,,,,,,,,,,,,,,,,,,,,,,,,218989,MDBM-4137,Logs support in Observability,Done,21/Mar/23 10:54 AM
dedicated fluentbit log parsers for mariadb logs,MDBM-4057,218909,Story,Closed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Blocker,Won't Do,Richard Bensley,5bca82e15c85706a3f096963,Richard Bensley,5bca82e15c85706a3f096963,Richard Bensley,5bca82e15c85706a3f096963,11/Jul/22 4:38 AM,13/Jul/22 2:24 AM,,13/Jul/22 2:24 AM,,Chokai-2,,Logs UI,skysql-logs,,0,,,,,"We require dedicated multi-line parsers for the fluentbit INPUT's to tail MariaDB logs.

Multi-line MariaDB logs:

* Error log
* Slow Query log


* https://docs.fluentbit.io/manual/administration/configuring-fluent-bit/multiline-parsing",,Richard Bensley,,,,,,,5bca82e15c85706a3f096963,,,,,,,,,,,,,,,,,,,,,,,,,,MDBM-4056,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@62e57979,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzyvov:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai-2 Sprint 5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1_*:*_1_*:*_17000_*|*_6_*:*_1_*:*_0_*|*_10045_*:*_1_*:*_164773000,"12/Jul/22 11:05 AM;5bca82e15c85706a3f096963;It is not possible to use a Parser or Multiline parser with the Tail input plugin for out needs.

A slow query log entry has an indeterminate amount of lines for an entry over multiple log lines.
The Tail plugin always treats new lines as a new JSON entry.

When configuring the multiline parser, you must know how many regex rules are are going to be applying.
Rules are created, with subsequent rules.",,,,,,,,,,,,,,,,,,,,,,,,,215925,MDBM-3479,Logs Archive: New logs types,Done,13/Jul/22 2:24 AM
Design test case for Logs functionality,MDBM-3840,218819,Story,Closed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Fixed,Kiril Mitov,5c98c4c4f50b5b225e2ca748,Kiril Mitov,5c98c4c4f50b5b225e2ca748,Kiril Mitov,5c98c4c4f50b5b225e2ca748,11/May/22 3:09 AM,07/Jun/22 10:07 AM,,17/May/22 7:10 AM,,Chokai-2,,Documentation,,,0,,,,,"Create matrix for Logs testing , 
which will include following dimensions 

Cloud : GCP /AWS
Tier : Foundation /Power

Log Type : general , audit , slow , error 

Topology : standalone , primary replica , xpand , columnstore



{code:java}
Enterprise Server
Error Log 
Slow Query Log 
General Query Log 
Audit Plugin Log 
SQL Error Log (SQL_ERROR_LOG plugin)  
Backup Logs 

MaxScale Log

Columnstore engine log /var/log/mariadb/columnstore

Galera    

Xpand (Clustrix) Log :
Query Log 
Default locations
session_log_bad_queries
session_log_ddl 
session_log_slow_threshold_ms  
session_log_error_queries

{code}
",,Kiril Mitov,,,,,,,5c98c4c4f50b5b225e2ca748,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@77e08f27,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzyrov:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai-2 Sprint 2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1_*:*_1_*:*_522270000_*|*_6_*:*_1_*:*_0_*|*_10045_*:*_1_*:*_10626000,"16/May/22 5:13 AM;5c98c4c4f50b5b225e2ca748;https://docs.google.com/spreadsheets/d/16DZz5cmb5qFNMZ5jlIrYEH9KxwAy5TUwRSSAx5bW-Wo/edit#gid=0

Excel Matrix with all dimensions",,,,,,,,,,,,,,,,,,,,,,,,,215925,MDBM-3479,Logs Archive: New logs types,Done,17/May/22 7:10 AM
Add slow query log symlink,MDBM-3589,218724,Sub-task,Closed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Do,Richard Bensley,5bca82e15c85706a3f096963,Richard Bensley,5bca82e15c85706a3f096963,Richard Bensley,5bca82e15c85706a3f096963,03/Mar/22 5:55 AM,11/Mar/22 6:07 AM,,11/Mar/22 6:07 AM,,Chokai-1,,None,,,0,,,,,Add the slow query log symlink to forward output to the containers stdout.,,Richard Bensley,,,,,,,5bca82e15c85706a3f096963,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@329dc8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzymg7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai-2 Sprint 5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1_*:*_1_*:*_439904000_*|*_6_*:*_1_*:*_0_*|*_10045_*:*_1_*:*_252063000,11/Mar/22 6:07 AM;5bca82e15c85706a3f096963;Adding fluentbit config as part of DBAAS-9380,,,,,,,,,,,,,,,,,,,,,,,,,218688,MDBM-3567,Slow Query Log,Done,11/Mar/22 6:07 AM
MariaDB slow and audit log parsing for fluentbit,MDBM-3588,218721,Story,Closed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Fixed,Richard Bensley,5bca82e15c85706a3f096963,Richard Bensley,5bca82e15c85706a3f096963,Richard Bensley,5bca82e15c85706a3f096963,03/Mar/22 5:54 AM,11/Apr/22 5:47 AM,,11/Mar/22 7:48 AM,,Chokai-2,,BE,,,0,,,,,"Fluentbit will receive all slow query and audit logs via stdout from the enterprise container.

Create and add the appropriate filters and parses to the fluentbit config.",,Nedyalko Petrov,Richard Bensley,,,,,,5a72dc0fdca0242a1ca8387a,5bca82e15c85706a3f096963,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1b026f54,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzymfz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai Sprint 1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-04-11 12:47:09.0,2022-04-11 12:47:09.0,2022-04-11 12:47:09.0,1_*:*_1_*:*_698023000_*|*_6_*:*_1_*:*_0,"11/Mar/22 7:48 AM;5bca82e15c85706a3f096963;This is no longer needed. An input and output will be defined for each log, so we wont have to work on a complex parser and filter to separate the log streams.","11/Apr/22 5:47 AM;5a72dc0fdca0242a1ca8387a;This feature will go in a fix release , right after Chokai.
Please make sure your changes  are not in the Chokai release branch , or the main brach , until Chokai is out and we switch to the Chokai Fix release ",,,,,,,,,,,,,,,,,,,,,,,,215925,MDBM-3479,Logs Archive: New logs types,Done,11/Mar/22 7:48 AM
Slow Query Log,MDBM-3567,218688,Story,Closed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Critical,Fixed,Richard Bensley,5bca82e15c85706a3f096963,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Ivan Zlatoustov,5a72dbfd9f949328111290a6,01/Mar/22 5:09 AM,01/Aug/22 2:21 AM,,09/Jun/22 8:10 AM,,Chokai-2,,BE,,,0,BE,,,,"Slow Query Log (add configuration variables to configuration variables in SkySQL)
https://mariadb.com/kb/en/slow-query-log-overview/",,Bistra Anachkova,Dobi Topuzova,Ivan Zlatoustov,Nedyalko Petrov,Richard Bensley,,,5a72dbee62323e24eaf793d4,5a72dbf28a7b1d1e8c6433b7,5a72dbfd9f949328111290a6,5a72dc0fdca0242a1ca8387a,5bca82e15c85706a3f096963,,,,,,,,,,,MDBM-3966,DBAAS-10109,DBAAS-10110,,,,,,,,,,,MDBM-4028,DBAAS-10184,DBAAS-10288,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@50d00d51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Bistra Anachkova,5a72dbee62323e24eaf793d4,,2.0,,,2|hzym27:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai-2 Sprint 5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-04-11 12:47:12.0,2022-04-11 12:47:12.0,2022-04-11 12:47:12.0,1_*:*_1_*:*_94668000_*|*_6_*:*_1_*:*_0_*|*_10099_*:*_1_*:*_2000_*|*_10098_*:*_1_*:*_3352812000_*|*_10045_*:*_2_*:*_197356000_*|*_10100_*:*_2_*:*_3771705000_*|*_10102_*:*_1_*:*_959067000_*|*_10017_*:*_1_*:*_4737699000_*|*_10115_*:*_1_*:*_92214000,"11/Apr/22 5:47 AM;5a72dc0fdca0242a1ca8387a;This feature will go in a fix release , right after Chokai.
Please make sure your changes  are not in the Chokai release branch , or the main brach , until Chokai is out and we switch to the Chokai Fix release ",12/Apr/22 10:36 AM;5bca82e15c85706a3f096963;Pull request is open https://github.com/mariadb-corporation/cloud-automation/pull/1114/files,"06/Jun/22 6:38 AM;5bca82e15c85706a3f096963;MariaDB Slow Query logs are now available in SkySQL test, and accessible using the log download UI.",,,,,,,,,,,,,,,,,,,,,,,215925,MDBM-3479,Logs Archive: New logs types,Done,20/Jul/22 11:56 PM
Logs Archive: New logs types,MDBM-3479,215925,Epic,In Progress,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Boris Besky,605d5cfe0a9b690071bf673a,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Ivan Zlatoustov,5a72dbfd9f949328111290a6,24/Jan/22 2:46 AM,24/Jan/23 11:56 PM,,,,Mt. Chokai Ice Box,,skysql-logs,,,1,pmmtchokai-fix,,,,"h2. Collect the following logs if enabled:

h3. Audit Log ( add configuration to configuration variables SkySQL)

https://mariadb.com/docs/security/mariadb-enterprise-audit/

h3. General Log

Stretch goal for Chokai Fix

h3. Slow Query Log (add configuration variables to configuration variables in SkySQL)

https://mariadb.com/kb/en/slow-query-log\-overview/

h3. MaxScale Log

MaxScale log is available via MaxScale API MXS-3178

h3. Xpand Logs

https://docs.google.com/document/d/1oaKv-JT\_bEyG3xY6E-W9wKuwgj\-7x99c3O3cZ5npntY/edit#heading=h.v1poi5rb1g7

h3. Requirements

https://docs.google.com/document/d/1TgLBL2dhNdtbc8PZSdpfUApP3vYfAJvwLITXi0fBI14/edit#
https://docs.google.com/document/d/1oaKv-JT\_bEyG3xY6E-W9wKuwgj\-7x99c3O3cZ5npntY/edit#heading=h.ia6o0l9cofkx

Slow Query log
Default Config:
slow_query_log=0 (1);
long_query_time=10.0;
For MariaDB Enterprise Audit
Default Config
server_audit_logging=OFF (ON)
server_audit_logging=OFF(ON);
The default Audit Filter should provide sensible defaults.
The customers should be able to change the audit filters.
Xpand
The following variable can be set as GLOBAL and SESSION
SET [GLOBAL | SESSION] variable_name = desired_value;
So even if we can’t set them as part of Config Manager they are still useful with session scope.
Default Config
session_log_bad\_queries = false (session)
session_log_ddl=true
session_log_error\_queries=true
session_log_slow\_queries=false
session_log_slow_threshold_ms=10000 (session)
session_log_users=true (default is false)",,Boris Besky,Dobi Topuzova,Ivan Zlatoustov,Mirena Kermilska,Nedyalko Petrov,Ralf Gebhardt,Richard Bensley,605d5cfe0a9b690071bf673a,5a72dbf28a7b1d1e8c6433b7,5a72dbfd9f949328111290a6,5a72dc079f949328111290a8,5a72dc0fdca0242a1ca8387a,557058:45342413-a55c-4a2b-bb7a-18a56215ec24,5bca82e15c85706a3f096963,,,,,,,,,,,,,,,,,,,,MDBM-3882,DBAAS-4527,MDBM-4071,MDBM-4020,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@49f06989,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-11,Logs Archive: New Logs,,To Do,,,,,,,,,,,,,,,,,,,,,,teal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Kiril Mitov,5c98c4c4f50b5b225e2ca748,,,Dobi Topuzova,5a72dbf28a7b1d1e8c6433b7,2|hzyjkn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-03-24 16:12:03.0,2022-03-24 16:12:03.0,2022-03-24 16:12:03.0,,"24/Mar/22 9:12 AM;5bca82e15c85706a3f096963;[~accountid:5a72dbfd9f949328111290a6] could we make it part of the requirements as to why we are not enabling the general log?

As we saw from the fluentbit demo, we will have the file paths configured in the backend, but actually enabling the general log will not be possible and should be disabled?

We should not entertain the thought of general logs until we have something in place to anonymize, compress, and maybe encrypt the logs.","24/Mar/22 9:25 AM;5a72dbfd9f949328111290a6;[~accountid:5bca82e15c85706a3f096963] the general query log has a performance impact and this is the only reason why it is disabled by default. 
general_log=1
I don't mind adding this log to the scope but not enabling it by default. 

Based on the requirements the logs should always be kept secure, encrypted, and compressed. (once the day is closed) 
If they are not compressed or encrypted this is a bug. 

We need to ensure the data is only accessible by our authorized customers. Anonymisation is not a requirement.  ","24/Mar/22 11:28 AM;605d5cfe0a9b690071bf673a;[~accountid:5bca82e15c85706a3f096963], [~accountid:5a72dbfd9f949328111290a6] anonymization is not quite the right term here. However, it is a general security requirement for any logs not to contain sensitive user data, and if they do, we will need to either create RBAC to restrict access to those or to completely scrub the logs of that data.  As an example, DataDog has the Sensitive Data Scanner to identify and flag or redact the logs: https://docs.datadoghq.com/account_management/org_settings/sensitive_data_detection/
Both options: either to scrub or to add RBAC require significant effort, in my estimate.","24/Mar/22 11:42 AM;5a72dbfd9f949328111290a6;[~accountid:605d5cfe0a9b690071bf673a] Levels of security is responsibility of our customers. 
*We have to ensure end to end encryption and access only for authorized users.*

The rest RBAC and redacting the logs for some of the customers is nice to have but as you said will require a lot of resources.
And the value is very low.
 
I.e web ui should hide PII because it is considered less secure. Someone can watch behind your back.

But in the files this data is important should be available.
","24/Mar/22 12:09 PM;605d5cfe0a9b690071bf673a;[~accountid:5a72dbfd9f949328111290a6] ""access only for authorized users"" requires a full implementation of RBAC and auditing, which we currently don't have. This is planned for Sky 2.0.","24/Mar/22 12:34 PM;5a72dbfd9f949328111290a6;What do you mean ? 
The logs are not accessible only by the users in the billing account authenticated by MariaDB ID ?","24/Mar/22 3:48 PM;605d5cfe0a9b690071bf673a;There is no RBAC support in SkySQL as of now. RBAC is based on roles - for example, there will need to be a specific role with the privilege to access user data. Not every authenticated user should be able to access every resource. DBAs/Devs/SREs/etc. all need different levels of access.","24/Mar/22 11:19 PM;5a72dbfd9f949328111290a6;This is clear Boris. 
As of now all authenticated users are authorized to access everything.
Once we introduce RBAC in SkySQL we will have a role for the logs of course. 
What we need now is to ensure the logs are accessible from the owner of the account. 


",11/Apr/22 5:51 AM;5a72dc0fdca0242a1ca8387a;The feature is now moved to a Chokai fix release ,"12/Apr/22 9:06 AM;5bca82e15c85706a3f096963;My notes on the progress so far and what we should be expecting.

MariaDB, Maxscale, Xpand, and ColumnStore generate several logs.
What is pushed by a process to STDOUT/STDERR (usually error logs) can or already have been configured to be picked up Fluentbit. They just need an appropriate tag on the INPUT field, so the log name is written to the customers bucket.

Any logs which are written to a volume are now also being picked up by Fluentbit (DBAAS-9380).

Four important questions are still being asked:

1) Where are the logs being picked up from?
2) What logs can a user enable or disable?
3) What logging options can a user configure?
4) What about the general log?


1) This is within our control and should NEVER change. *The log path is always the same for each log* in every configuration. It does not change, cannot and should not be changed. Any option in config manager which exposes the log path as a mutable option must be expunged from all releases.

2) A user should be able to enable or disable the relative audit/access/user and query/slow query logs in MariaDB, Xpand and CS. This is nothing more than a simple ON or OFF either from an SQL command or the by using the config manager. The error logs are always on.

3) Most logs which are not the error log, offer options as to what is actually logged. Here, *we (skysql) need to provide sensible defaults* for mariadb audit, mariadb slow, and xpand query logs.

4) No. Don't want it. Don't need it. The volume is too high and the data is unsecured plain text. The general log is a 1 for 1 copy of all DML operations.","13/Apr/22 7:58 AM;5a72dbfd9f949328111290a6;2) All logs should be enabled and disabled from the configuration. 
3) 
h3. Slow Query log
Default Config:
slow_query_log=0;
long_query_time=10.0;

h3. For MariaDB Enterprise Audit
Default Config
server_audit_logging=OFF
The default Audit Filter should provide sensible defaults.
The customers should be able to change the audit filters. 

h3. MaxScale
Default Config 
Log on/off 


h3. Xpand
Default Config
session_log_bad_queries = false
session_log_ddl=true
session_log_error_queries=true
session_log_slow_queries=-false- true
session_log_slow_threshold_ms=10000
session_log_users=false
","31/May/22 12:24 PM;5a72dc0fdca0242a1ca8387a;*Standalone, HA , ColumnStore:*
Slow Query and Audit log configurations exposed to users are available here:
https://docs.google.com/spreadsheets/d/105C6qS58gnBOKvauIv_czxxN8rEzKBwY-C-LGcFMKWU/edit#gid=910283215

*Xpand , MXS*
Expand and MXS logs are enabled by default.
With Chokai-2, users will not be able to enable or disable clustrix and MXS logs.
Adding Xpand and MXS logs to Config manager is not in the Chokai-2 scope","05/Jun/22 10:26 AM;5a72dc079f949328111290a8;The new log types are available for test in stardust build *1.7.6* and each moe build after *runner-0.7.110*
More details about the implemented new log types are available here:
https://mariadbcorp.atlassian.net/wiki/spaces/STARDUST/pages/1667301389/Log+types+supported+in+Monitoring
","20/Jun/22 8:21 AM;5a72dc0fdca0242a1ca8387a;A Xpand build, containing a DBAAS-10066  fix,  will be targeted for the end-of-month July release
( confirmed in a separate email chain).
Having the change in place, skysql expand logs will be made available with the immediate next release.
Until then clustrix.log will not be available for download 
[~accountid:5a72dbfd9f949328111290a6] FYI ",,,,,,,,,,,,213453,MDBM-1410,Database Logs,In Progress,28/Feb/22 7:22 AM
Slow Query Browser UI based,MDBM-3035,216014,Epic,Needs Feedback,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Fixed,Prabodh Meshram,615688809cdb9300724224c2,Bhavin Modi,5e66a51e77d46c0cf93ad5f5,Ivan Zlatoustov,5a72dbfd9f949328111290a6,15/Sep/21 8:16 AM,13/Jun/23 2:28 PM,,26/May/23 7:04 AM,,ROS 1.4,SkySQL 2.0 05/23 Release,SkySQL Portal (Unified),,,0,pmskysql2.0,,,,"Implement Slow Query Log from Clustrix UI in the Monitoring
Implement Slow Query Log from MariaDB in the Monitoring

Requested by many customers and all our RDBA
More recently by Hitlabs

Consider options to use it for all MariaDB Topologies

Manjot: I would do this as I've had good experience with it: https://www.percona.com/doc/percona-monitoring-and-management/1.x/conf-mysql.html

{code:java}
log_output=file
slow_query_log=ON
long_query_time=0
log_slow_rate_limit=100
log_slow_rate_type=query
log_slow_verbosity=full
log_slow_admin_statements=ON
log_slow_slave_statements=ON
slow_query_log_always_write_time=1
slow_query_log_use_global_control=all
innodb_monitor_enable=all
userstat=1
{code}

rate limit is what will makes it more performant

Slow queries will depend on database access.
MDBM-3081",,Dobi Topuzova,Ivan Zlatoustov,Jags Ramnarayan,Nedyalko Petrov,Venkateswaran Iyer,,,5a72dbf28a7b1d1e8c6433b7,5a72dbfd9f949328111290a6,712020:bc64021c-c884-4911-8d2d-235eceb97b3a,5a72dc0fdca0242a1ca8387a,623d06c84a57610068e7d439,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@79680136,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-3,Slow Query Browser UI based,,To Do,,,,,,,,,,,,,,,,,,,,,,yellow,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Dobi Topuzova,5a72dbf28a7b1d1e8c6433b7,,,,,2|hzy8l3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2023-03-02 12:43:19.0,2023-03-02 12:43:19.0,2023-03-02 12:43:19.0,1_*:*_1_*:*_53361154000_*|*_10110_*:*_1_*:*_0_*|*_10045_*:*_1_*:*_10000_*|*_10100_*:*_1_*:*_417877000_*|*_10017_*:*_1_*:*_29696000,"02/Mar/23 4:43 AM;5eaa0f957dab3a0bb4f93f7d;[~accountid:5e66a51e77d46c0cf93ad5f5] This epic has no PRD, no UI design and no written acceptance criteria. Please, add them as soon as possible.","07/Mar/23 1:26 PM;712020:bc64021c-c884-4911-8d2d-235eceb97b3a;[~accountid:5e66a51e77d46c0cf93ad5f5] let's get the PRD going right away. 

Here is what I said on the requirements ... from a chat with you, several in Jan .... 

_{{Philip, Boris, team - we committed to delivering the query browser in ROS 1.3. I strongly believe without a basic view into which SQL is slow and possible analysis on these it is an incomplete product. I am sure you all agree.
I believe Buff had sufficiently analyzed this in the past and come up with specific requirements. 

What I need :
Philip - I need to know if this is something you can get started on ? if so, when?
We need to produce a requirements doc (if Buff's doc doesn't suffice) -- large enough scope and figure out if we can deliver something meaningful to the market within Sky2 as part of GA. I can help.
At a bare minimum the user should be able to view the slow queries (slow query logs if ON will be in the same bucket as the rest of the logs), apply filters (e.g. some specific table or view, last n mins, DB) along with relevant metrics - query latency, frequency, Load(computed). Allow the user to click on it to view 'explain plan' and probably the output of 'Explain analyze'.
We have the recent work done by Ashutosh (I believe it is working) on Index advisor -- you can feed queries and it will split out potential indexes and its value.  
@venkat.iyer
 - is the code usable ?
There are several examples you can use for motivation:
Datadog - https://www.datadoghq.com/blog/database-performance-monitoring-datadog/.
RDS Perf insights - I like this the most. - https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.Overview.html
everSQL - Interesting comp focused on perf optimizations ... exploring partnership/integration could also be something we could explore.
Percona : PMM query analytics - rich but confusing UX. https://www.percona.com/doc/percona-monitoring-and-management/1.x/qan.html
And, 20 more vendors...
}}_
",22/May/23 7:48 AM;712020:bc64021c-c884-4911-8d2d-235eceb97b3a;[~accountid:5e66a51e77d46c0cf93ad5f5][[~accountid:5a7740f1f8321921e181f3ff] - is there a PRD on this now ?  ,"26/May/23 4:05 AM;5a72dc0fdca0242a1ca8387a;[~accountid:605d5cfe0a9b690071bf673a] , [~accountid:5e66a51e77d46c0cf93ad5f5] with the implementation here completed , we need to ensure the slow query browser testing quality.
Is there a PRD already available that the QA team can use as a baseline for their testing?
If not , can we have the main user scenarios along with the latest agreed UX added to the ticket description, so [~accountid:712020:d170a8c7-843d-4a14-a47f-15f5b16315ad] and the QA can base there testing on those.","26/May/23 8:26 AM;623d06c84a57610068e7d439;[~accountid:5e66a51e77d46c0cf93ad5f5], can you point to the PRD or the agreed upon functionality? A confluence page would do.",31/May/23 3:13 AM;5a72dbf28a7b1d1e8c6433b7;[~accountid:5e66a51e77d46c0cf93ad5f5] can you provide needed PRD? ,"31/May/23 8:58 AM;623d06c84a57610068e7d439;[~accountid:5e66a51e77d46c0cf93ad5f5], QA was not brought up to speed on this feature and with a lack of PRD this is delaying the verification of the feature.",,,,,,,,,,,,,,,,,,,214097,MDBM-4942,SkySQL Observability May 23,To Do,31/May/23 3:09 AM
Fluentbit config for audit and slow logs,MDBM-2949,218459,Story,Closed,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Do,Richard Bensley,5bca82e15c85706a3f096963,Richard Bensley,5bca82e15c85706a3f096963,Richard Bensley,5bca82e15c85706a3f096963,05/Aug/21 6:29 AM,14/Jan/22 4:48 AM,,14/Jan/22 4:48 AM,,Chokai-1,,Monitoring Components,,,0,,,,,"By default we are only capturing error logs from mariadb pods.
Expand the fluentbit config to handle audit and slow logs.
It's possible we might solve the slow query problem using an exporter.",,Richard Bensley,,,,,,,5bca82e15c85706a3f096963,,,,,,,,,,,,,,,,,,,,,,,,,,,,MDBM-3005,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@a09b994,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzy667:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,MDBM Mt. Bandai Sprint 5,MDBM Mt. Bandai Sprint 6,MDBM Mt. Bandai Sprint 7,MDBM Mt. Bandai Sprint 8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1_*:*_4_*:*_10813575000_*|*_6_*:*_1_*:*_0_*|*_10099_*:*_4_*:*_750926000_*|*_10045_*:*_4_*:*_2429891000,"14/Jan/22 4:48 AM;5bca82e15c85706a3f096963;This will be completed in a different capacity, and most likely through cloud-automation and the dbaas project.",,,,,,,,,,,,,,,,,,,,,,,,,214768,MDBM-2728,Log Archive in Stardust,Done,14/Jan/22 4:48 AM
Development Mode (Debug Mode),MDBM-2723,213616,Epic,Open,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Boris Besky,605d5cfe0a9b690071bf673a,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Ivan Zlatoustov,5a72dbfd9f949328111290a6,29/Apr/21 2:46 AM,03/Jan/23 2:50 PM,,29/Apr/21 2:46 AM,,,,Monitoring Infrastructure,SkySQL Portal (Unified),,0,pmskysql2.0,,,,"h4. Debug Mode

This feature allows developers to temporarily change the database configuration to a development mode.
In this mode, database performance is a secondary priority. All additional information is collected.

Currently, we have defined lots of useful metrics that are just not collected or provided on the server level, they are just turned off (by default) because the tax on the performance is severe. This is mostly Performance Schema and some tools from Information\_schema more noticeably the query response time histogram, profiling etc. They are well\-known tools. But most people are not using those in production and for a reason. Collection this data is known to cause performance degradation and it is not practical to enable this in production environments.
Some of the logs i.e Slow Query Log and Audit Log fall in the same category
It is not practical to enable all those metrics at all times.
We can enable a set of monitoring options on demand and push it down to database services using SkySQL Configurations mechanism.  We can have predefined sets i.e. ""Development"" mode.
Once Debug is enabled, performance will be a second priority and various debug switches will be enabled. The logs collected etc.
Later once the database is debugged the services can be returned back to the ""Optimized"".
Use case: As a user, I can enable the ""Development"" mode to measure all metrics, in this mode, I prioritize information at the expense of performance gets. If I forget, I will get a notification to turn it off after some time.
The metrics above collected from information and performance schema are needed for the QoS and this should apply to them as well.

The database service is to be marked as in development mode clearly visible.
The development mode should be enabled without restart of the database.",,Ivan Zlatoustov,,,,,,,5a72dbfd9f949328111290a6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6b15a0f5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-10,Enable Development Mode,,To Do,,,,,,,,,,,,,,,,,,,,,,blue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzw6br:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,213452,MDBM-1317,Database Developers Tools,To Do,
Process List/Slow Query List,MDBM-510,213497,Epic,Open,MDBM,MariaDB Monitor,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Zsolt Kormany,639912c276fb74a95142525c,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Ivan Zlatoustov,5a72dbfd9f949328111290a6,19/Apr/19 5:36 AM,06/Apr/23 8:12 AM,,,,April Release [MDBM],ROS 1.4,Monitoring Infrastructure,,,0,pm_ros1.2,pmskysql2.0,,,"h3.Description
We need to display a list of

# Recent slow queries
# Currently running queries
# The queries should be categorized for filtering
( Inserts, Updates, Deletes, Selects, Joins, Tables included in the query)

The data for those queries should be retrieved every 30 seconds or less.
We should keep snapshots of those lists for the last hour.

Implement data store and exporter for the list of long\-running queries

Properties required for each query:

* Query \- Query Script
* Time \- time running
* User \- user@domain of the requestor
* Type \- Type of the query (SELECT, INSERT, UPDATE, DELETE)
* Joins
* Database \- Database
* Latency

Categorize the queries by tags (parse query comments for tags)

h3.Acceptance
A PR, containing implementation for the listing of the long\-running queries",,Ann Nguyen,Ivan Zlatoustov,Venkateswaran Iyer,Vladimir Ekimov,,,,5c99460bc430371a3c67e751,5a72dbfd9f949328111290a6,623d06c84a57610068e7d439,613049e86e5e1e0071d92042,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@771a5ed8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,List Slow Queries,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzw5zz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2019-07-09 09:27:04.0,2019-07-09 09:27:04.0,2019-07-09 09:27:04.0,,09/Jul/19 2:27 AM;613049e86e5e1e0071d92042;Estimate looks low to me. Do we need to revise it?,"16/Jan/23 10:35 AM;623d06c84a57610068e7d439;[~accountid:605d5cfe0a9b690071bf673a], can we put together the effort required end-to-end for this feature?",,,,,,,,,,,,,,,,,,,,,,,,213563,MDBM-2633,Monitoring Product Improvements,To Do,
Continue improvements to DBA Assist mode (bandwidth?) ,MCDEV-1475,248671,Task,To Do,MCDEV,MariaDB Cloud Development,software,Nedyalko Petrov,712020:93c30277-5966-49c8-83b0-b83c0bb1df09,,,High,,,,Jags Ramnarayan,712020:fae699ec-101d-4d03-bee5-851cc8c801a9,Jags Ramnarayan,712020:fae699ec-101d-4d03-bee5-851cc8c801a9,04/Sep/24 10:50 PM,13/Jan/25 6:01 AM,,,,,,,,,0,,,,,"Read slow_query_logs using the Observability API. Read error logs.
 Allow reading of metrics for historical analysis or metrics like CPU",,Jags Ramnarayan,,,,,,,712020:fae699ec-101d-4d03-bee5-851cc8c801a9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3d117acf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i02tff:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,248328,MCDEV-1488,Sky Copilot -  Backlog,To Do,
Support for slow query analysis by reading the slow logs from disk,MCDEV-1473,248245,Task,Deployed,MCDEV,MariaDB Cloud Development,software,Nedyalko Petrov,712020:93c30277-5966-49c8-83b0-b83c0bb1df09,,,Highest,Done,Vishal Rao,712020:8d082fdb-5ea3-44ba-b405-ea3f0a6e6807,Jags Ramnarayan,712020:fae699ec-101d-4d03-bee5-851cc8c801a9,Jags Ramnarayan,712020:fae699ec-101d-4d03-bee5-851cc8c801a9,04/Nov/24 10:30 AM,29/Mar/25 7:51 PM,,29/Mar/25 7:51 PM,,,,,,,0,,,,,"* Use the log REST API to read the slow_log files. 
* Develop a tool for the DBA agent to surface out the slow_logs
* By default, use the latest slow_log available. I believe we create a new file each day. 
* Look at the current instructions for how it works for slow_log table --- should be similar or better. E.g. check if slow_logging is turned ON first. 
* The slow log could be very large. It is important to pay attention to the user request - top few, top K, etc … always limit the response to agent so we are always conscious of token count. 
* Always sort on latency. Slowest first. 

The same underlying API request is also applicable for reading other Logs like Error logs. Which is also required. ",,Jags Ramnarayan,Vishal Rao,,,,,,712020:fae699ec-101d-4d03-bee5-851cc8c801a9,712020:8d082fdb-5ea3-44ba-b405-ea3f0a6e6807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@20e85d02,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i000wm:zzzti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-30 02:51:19.287,2025-03-30 02:51:19.287,2025-03-30 02:51:19.287,11538_*:*_1_*:*_0_*|*_11530_*:*_1_*:*_12558058964_*|*_11532_*:*_1_*:*_22773,29/Mar/25 7:51 PM;712020:8d082fdb-5ea3-44ba-b405-ea3f0a6e6807;Done as part of [https://skysql.atlassian.net/browse/DEV-1439|https://skysql.atlassian.net/browse/DEV-1439|smart-link] ,,,,,,,,,,,,,,,,,,,,,,,,,248328,MCDEV-1488,Sky Copilot -  Backlog,Done,29/Mar/25 7:51 PM
Add New Parameters to Config Manager,MCDEV-1158,247730,Task,Done,MCDEV,MariaDB Cloud Development,software,Nedyalko Petrov,712020:93c30277-5966-49c8-83b0-b83c0bb1df09,,,High,Done,Petko Vasilev,5a72dc154ab43429358cbaad,Ned,712020:482c5f95-49af-4241-b21b-62150de49367,Ned,712020:482c5f95-49af-4241-b21b-62150de49367,17/Oct/24 4:02 AM,06/Nov/25 6:44 AM,,18/Oct/24 7:00 AM,,,,,,,0,serverlessPhase1UAT,,,,"We need to update the config manager to include the following parameters for enhanced logging and performance monitoring:

# {{slow_query_log}}

* {{log_slow_filter}}
* {{log_slow_rate_limit}}

# {{log_slow_verbosity}}

# {{long_query_time}}
# {{log_output}}

Additionally, please ensure that the {{log_output}} parameter is set to {{TABLE}} as the only option.",,Ned,Petko Vasilev,,,,,,712020:482c5f95-49af-4241-b21b-62150de49367,712020:9648f125-7199-418b-b7cd-efce6498fbd6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6bfd11f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i02ulu:v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2024-10-17 12:01:32.983,2024-10-17 12:01:32.983,2024-10-17 12:01:32.983,11530_*:*_1_*:*_5637580_*|*_11532_*:*_1_*:*_0_*|*_11535_*:*_1_*:*_90794321_*|*_11534_*:*_1_*:*_621521,17/Oct/24 5:01 AM;712020:9648f125-7199-418b-b7cd-efce6498fbd6;{{log_output}} will be forced to {{TABLE}} and will not be available to change in the config manager for now,,,,,,,,,,,,,,,,,,,,,,,,,246654,MCDEV-531,Serverless Phase 1 ,Done,18/Oct/24 7:00 AM
Request to install and configure default tools on DB pods running MariaDB in our Kubernetes environment.,MCDEV-661,248659,Task,To Do,MCDEV,MariaDB Cloud Development,software,Nedyalko Petrov,712020:93c30277-5966-49c8-83b0-b83c0bb1df09,,,Low,,,,Bartlomiej Oles,712020:53cf431a-f16d-4953-95dc-b9199ca01265,Bartlomiej Oles,712020:53cf431a-f16d-4953-95dc-b9199ca01265,08/Jul/24 5:32 AM,09/Jul/24 12:23 PM,,,,,,,,,0,,,,,"*Details of Required Tools:*

||Tool/Binary||Description||Installation / Configuration Command||Required||
|*Percona Toolkit*|Advanced command-line tools for MySQL and MariaDB tasks related to performance.|{{sudo apt-get install percona-toolkit}}|Yes|
|*mytop*|A top clone for monitoring SQL queries and performance in real time.|{{sudo apt-get install mytop}}|Yes|
|*MariaDB Performance Schema*|Monitor MariaDB Server performance.|{{SET GLOBAL performance_schema = ON;}} Add to {{/etc/mysql/mariadb.conf.d/50-server.cnf}} under {{[mysqld]}}: {{performance_schema=ON}}|No
In config manager|
|*Long Query Log*|Logs slow queries for identifying performance issues.|{{[mysqld]: long_query_time = 10 slow_query_log = 1 slow_query_log_file = /var/log/mysql/mariadb-slow.log}}|no
Customer precognitive and in config manager|
|*sysbench*|Benchmark tool for evaluating OS and DBMS performance.|{{sudo apt-get install sysbench}}|no, should be run remotely|
|*mariabackup*|Backup solution for MariaDB.|{{sudo apt-get install mariadb-backup}}|no
Handled by backup manager|
|*htop*|Interactive process viewer for monitoring system health.|{{sudo apt-get install htop}}|Yes|
|*iotop*|Utility showing which processes perform the most disk I/O.|{{sudo apt-get install iotop}}|Yes|
|*screen*|Full-screen window manager that multiplexes a physical terminal.|{{sudo apt-get install screen}}|Yes|

Link to initial SkyDBA, [https://www.notion.so/skysql/DRAFT-DBA-Tooling-and-default-pod-specification-d8c431a7dc4c428484a2ea1be063a3ae#14d331b9773748f6972b3e1b8e610fbd|https://www.notion.so/skysql/DRAFT-DBA-Tooling-and-default-pod-specification-d8c431a7dc4c428484a2ea1be063a3ae#14d331b9773748f6972b3e1b8e610fbd]
",,Bartlomiej Oles,Bryan Bancroft,,,,,,712020:53cf431a-f16d-4953-95dc-b9199ca01265,712020:e24083a7-2e18-4195-bb38-1a0613f55ff5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2dccf3c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i02bt7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2024-07-09 19:23:52.323,2024-07-09 19:23:52.323,2024-07-09 19:23:52.323,,09/Jul/24 12:23 PM;712020:e24083a7-2e18-4195-bb38-1a0613f55ff5;[~accountid:712020:482c5f95-49af-4241-b21b-62150de49367] fyi to get planned,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,08/Jul/24 5:32 AM
 Standard Installation of Monitoring and Performance Tools for MariaDB and MySQL Environments,MCDEV-456,247305,Task,To Do,MCDEV,MariaDB Cloud Development,software,Nedyalko Petrov,712020:93c30277-5966-49c8-83b0-b83c0bb1df09,,,Low,,Bartlomiej Oles,712020:53cf431a-f16d-4953-95dc-b9199ca01265,Bartlomiej Oles,712020:53cf431a-f16d-4953-95dc-b9199ca01265,Bartlomiej Oles,712020:53cf431a-f16d-4953-95dc-b9199ca01265,06/May/24 8:10 AM,06/May/24 8:12 AM,,,,,,,,,0,,,,,"*Description*: The following tools and binaries need to be installed and configured to enhance our monitoring and performance capabilities across MariaDB and MySQL environments:

# *Percona Toolkit*
#* *Description*: command-line tools for MySQL and MariaDB performance tasks.
#* *Installation Command*: {{sudo apt-get install percona-toolkit}}
#* *Usage*: Frequently used for customers like LawCloud or Movidone for performing alters using {{osc}}.
# *mytop*
#* *Description*: Real-time monitoring tool for SQL queries and performance.
#* *Installation Command*: {{sudo apt-get install mytop}}
# *MariaDB Performance Schema*
#* *Description*: Feature to monitor MariaDB Server performance.
#* *Installation Command*: Enable via {{SET GLOBAL performance_schema = ON;}} and add to {{/etc/mysql/mariadb.conf.d/50-server.cnf}} under {{[mysqld]}} section.
# *Long Query Log*
#* *Description*: Logs queries taking longer than a specified time, aiding in identifying slow queries.
#* *Installation Command*: Add to {{my.cnf}}: {{long_query_time = 10}}, {{slow_query_log = 1}}, {{slow_query_log_file = /var/log/mysql/mariadb-slow.log}}
# *sysbench*
#* *Description*: Benchmark tool for evaluating OS and DBMS performance.
#* *Installation Command*: {{sudo apt-get install sysbench}}
# *TBD mariabackup (predefined scripts)*
#* *Description*: Backup solution for MariaDB.
#* *Installation Command*: {{Predefined scripts to be created}} [~accountid:712020:53cf431a-f16d-4953-95dc-b9199ca01265] 
# *htop*
#* *Description*: Interactive process viewer for monitoring system health.
#* *Installation Command*: {{sudo apt-get install htop}}
# *iotop*
#* *Description*: Utility to monitor disk I/O usage by processes.
#* *Installation Command*: {{sudo apt-get install iotop}}
# *screen*
#* *Description*: Window manager that multiplexes a physical terminal.
#* *Installation Command*: {{sudo apt-get install screen}}
# *Tuning-primer.sh*
#* *Description*: Script providing tuning suggestions based on current server usage.
#* *Installation Command*: Download from GitHub, {{chmod +x tuning-primer.sh}}, then run {{./tuning-primer.sh}}.
# *RDBA scripts*
#* *Description*: Synchronization with GitHub for jump host utility scripts.
#* *Installation Command*: To be detailed.",,Bartlomiej Oles,,,,,,,712020:53cf431a-f16d-4953-95dc-b9199ca01265,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@38e4fb4c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i02ahr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,06/May/24 8:11 AM;712020:53cf431a-f16d-4953-95dc-b9199ca01265;[~accountid:712020:e24083a7-2e18-4195-bb38-1a0613f55ff5] ,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,06/May/24 8:10 AM
Improve log formats documentation,DOCS-5487,239046,Task,TODO,DOCS,Documentation,software,Max Mether,557058:fd452c42-c166-4eca-b92d-5e71dd7b4e2d,,,Low,,Tauseef Khan,712020:591b7322-e659-4dc1-a8c2-a40bf7298860,Julien Fritsch,557058:4f8c273b-66e4-4ef7-8f81-4950535d4170,Julien Fritsch,557058:4f8c273b-66e4-4ef7-8f81-4950535d4170,18/Oct/24 3:01 AM,18/Dec/25 10:54 AM,,,,,,,,,0,,,,,"||[~accountid:557058:45342413-a55c-4a2b-bb7a-18a56215ec24] said on Friday 18th of October 2024 - “_With a new docs system we could restart this and take currently existing documentation form the ES docs and enhance it”_||

----

*_Initial MDEV summary (from Ian)_*

See [MDEV-19729|https://jira.mariadb.org/browse/MDEV-19729].
Log formats are loosely defined in the documentation. There are no strict definition for file log formats, which makes developing a parser, a job of back engineering the log and testing it agains self generated log messages, instead of just implementing a spec. I think the documentation should include log format specification, like this:
Error log:

*Comment from Geoff on the same issue*

|{noformat}(date:<yyyy-MM-dd hh:mm:ss|yyyyMMdd hh:mm:ss>) <[(logger)]> (message){noformat}|

In the Enterprise Documentation, we have started documenting some log format details, such as:

# The binary log format is documented here: [https://mariadb.com/docs/reference/es10.6/logging/binary/#es10-6-logging-binary-format|https://mariadb.com/docs/reference/es10.6/logging/binary/#es10-6-logging-binary-format]

For the binary log, we should still add other details, like the following:

* Show an example of {{mariadb-binlog}} output with {{binlog_format=ROW}}.
* Show an example of {{mariadb-binlog}} output with {{binlog_format=STATEMENT}}.
* Show an example of {{mariadb-binlog}} output with {{binlog_format=MIXED}}.
* Explain how data-at-rest encryption (i.e. setting {{encrypt_binlog=ON}}) affects the format.
* Explain how {{binlog_row_image}} affects the format.
* Explain how {{binlog_row_metadata}} affects the format.
* Explain what specific fields mean, such as the GTID, {{Xid}} (i.e. transaction ID for 2PC), {{cid}} (i.e. group commit ID for parallel replication), {{server id}}, {{end_log_pos}}, {{thread_id}}, timestamp, etc.

Are there other details about the binary log format that you think should be documented?

# The error log format is documented here: [https://mariadb.com/docs/reference/es10.6/logging/error/#es10-6-logging-error-format|https://mariadb.com/docs/reference/es10.6/logging/error/#es10-6-logging-error-format]

For the error log, we should still add other details, like the following:

* Show examples of common messages in the log.
* Explain how the format differs when logging to syslog vs. when logging to a file.
* Explain how certain messages can deviate from the typical format (i.e. Galera's SST log messages)
* Explain the format of a stack trace after a crash in the error log

Are there other details about the error log format that you think should be documented?

# The Enterprise Audit log format is documented here: [https://mariadb.com/docs/security/mariadb-enterprise-audit/#audit-format|https://mariadb.com/docs/security/mariadb-enterprise-audit/#audit-format]

Are there other details about the Enterprise Audit log format that you think should be documented?

We still need to document the format of other logs as well, such as:

* Audit log for Audit plugin v1
* Slow query log
* General query log
* Enterprise Backup SST Joiner Logs (mariabackup.prepare.log and mariabackup.move.log)
* Enterprise Backup SST Donor Log (mariabackup.backup.log)

Which other log formats should be documented?",,Max Mether,,,,,,,557058:fd452c42-c166-4eca-b92d-5e71dd7b4e2d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@65b6cf9f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i00lgd:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-16 17:00:01.403,2025-12-16 17:00:01.403,2025-12-16 17:00:01.403,,"16/Dec/25 9:00 AM;557058:fd452c42-c166-4eca-b92d-5e71dd7b4e2d;Some of the error logs seem to have the format documented others not. I think this task would be to check whether this has been systematically implemented and implement it for the logs where this is not the case. The logs can be found here:
[https://mariadb.com/docs/server/server-management/server-monitoring-logs/overview-of-mariadb-logs|https://mariadb.com/docs/server/server-management/server-monitoring-logs/overview-of-mariadb-logs|smart-link] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,18/Oct/24 3:01 AM
Missing a Slow Query Log overview ,DOCS-5106,135889,Task,TODO,DOCS,Documentation,software,Max Mether,557058:fd452c42-c166-4eca-b92d-5e71dd7b4e2d,,,Low,,Daniel Bartholomew,557058:7034afad-1579-404b-bd4c-1064ed6befbe,Hartmut Holzgraefe,557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5,Hartmut Holzgraefe,557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5,31/Oct/22 7:45 AM,28/Nov/25 5:54 AM,,,,,,,,,0,AI_Actionable,PIFE-ES,,,"* can't find an overview page describing the slow query log, contents / formatting, configuration options in one place (something similar to [https://mariadb.com/kb/en/slow-query-log-overview/|https://mariadb.com/kb/en/slow-query-log-overview/|smart-link] in KB)
* config parameter detail pages like [https://mariadb.com/docs/reference/mdb/system-variables/slow_query_log/|https://mariadb.com/docs/reference/mdb/system-variables/slow_query_log/] , [https://mariadb.com/docs/reference/mdb/system-variables/slow_query_log_file/|https://mariadb.com/docs/reference/mdb/system-variables/slow_query_log_file/] do not refer to each other so it's hard to find out
* [https://mariadb.com/docs/reference/mdb/system-variables/slow_query_log_file/|https://mariadb.com/docs/reference/mdb/system-variables/slow_query_log_file/] says: {{Must be enabled to activate other slow log options}}
This seems to be wrong for two reasons:
a) it is basically always enabled as empty string is interpreted as ""use default name"", there is no way to enable it via this parameter
b) this parameter is ignored completely when log destination is the slow query log table, not a file ({{log_output=TABLE}})",,Hartmut Holzgraefe,,,,,,,557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5,,,,,,,,,,,,,,,,,,,,,,,,,,SN-32,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6033b4e3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzvvzz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31/Oct/22 7:46 AM;557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5;related support case: [https://cloud.mariadb.com/case.do?id=CS0470458|https://cloud.mariadb.com/case.do?id=CS0470458],,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,31/Oct/22 7:45 AM
pages on tmp_table_size and tmp_memory_table_size incomplete,DOCS-4072,183910,Task,CANCELED,DOCS,Documentation,software,Max Mether,557058:fd452c42-c166-4eca-b92d-5e71dd7b4e2d,,,Critical,Done,,,Hartmut Holzgraefe,557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5,Hartmut Holzgraefe,557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5,07/Mar/23 3:24 AM,05/Dec/25 1:36 PM,,05/Dec/25 1:36 PM,,,,,,,1,Approved,internal-request,,,"* Both pages mention each other, but there is no hyper link on the reference
* Neither explain for what kinds of queries such implicit tables are actually needed for
* Neither mention the related max_heap_table_size setting
* Neither mention the related {{Created_tmp_disk_tables}} and {{Created_tmp_tables}} STATUS variables
* Neither mention that such tables are created in the directory set by {{tmpdir}}
* Neither mention how queries using temporary tables on disk can be tracked in the slow query log with `SET GLOBAL log_slow_filter='tmp_table_on_disk'; 


Add to this that the pages on STATUS counters {{Created tmp_tables}} and {{Created_tmp_disk_tables}} only have 

”A description for this Status Variable has not yet been added to this Documentation.”

",,Anne Strasser,Hartmut Holzgraefe,Valerii Kravchuk,,,,,5b57279f6366b42ca0ded906,557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5,557058:98e2f724-0ad8-469a-aa0a-cc5340c054d7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@754923a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzwjr3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,CS0547711,,,,,,,,,,,,,,,,,,,,,,,,2023-04-20 17:16:05.868,2023-04-20 17:16:05.868,2023-04-20 17:16:05.868,10177_*:*_1_*:*_34988773702_*|*_10122_*:*_1_*:*_0,07/Mar/23 3:43 AM;557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5;Related support case: [https://cloud.mariadb.com/case.do?id=CS0547711|https://cloud.mariadb.com/case.do?id=CS0547711|smart-link] ,20/Apr/23 10:16 AM;5b57279f6366b42ca0ded906;[~accountid:557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5] the link to the related support case doesn’t work. Goes to MariaDB login page. ,"20/Apr/23 1:23 PM;557058:d2d84b53-8fb8-48f0-bd38-15c5a51b90a5;Customer cases are only visible when logged in (and having access to the ServiceNow CSM in the first place). When not logged in the redirekt back to the CSM case page does not always work, so clicking the link once more after having logged in is necessary in that case.",20/Apr/23 2:31 PM;5b57279f6366b42ca0ded906;thank you. You’re right. That did the trick and showed me the customer ticket.,01/Jul/24 9:12 AM;557058:4f8c273b-66e4-4ef7-8f81-4950535d4170;Both pages should be linked to the KB.,,,,,,,,,,,,,,,,,,,,,,,,Done,05/Dec/25 1:36 PM
"KB fix - ""EXPLAIN"" and ""EXPLAIN in the Slow Query Log""",DOCS-1260,28072,Task,TODO,DOCS,Documentation,software,Max Mether,557058:fd452c42-c166-4eca-b92d-5e71dd7b4e2d,,,Medium,,Daniel Bartholomew,557058:7034afad-1579-404b-bd4c-1064ed6befbe,Jacob Moorman,5b64ff6035712e3b81c6a5a7,Kirk Brown,557058:25c8288e-7832-45e9-ad86-0e2f2b7c5a17,09/Oct/19 10:12 AM,24/Nov/25 8:38 AM,,,,,,,,,0,AI_Needs_Manual_Review,,,,"This DOCS ticket addresses this MDEV ticket - [https://jira.mariadb.org/browse/MDEV-17079|https://jira.mariadb.org/browse/MDEV-17079]

KD and I interpreted this as follows:

The sample shown on this page does not include the columns r_rows and r-filtered. We thought we should recreate the sample and there is no schema setup for that, so I will need to recreate the sample, including indexes, from the EXPLAIN. 

Additionally, the ticket notes that those columns should probably be documented as well and references an ANALYZE doc where they are already explained.

------------------------------------------------------

I slacked with Geoff on this ticket and he has clarified the requirements of the ticket. Now I can do just what the ticket asks for. Thank you [~accountid:557058:44227755-29b4-410c-87c5-9af07ac490ed] 



----

{color:#ff5630}*Content Here:* {color}

* [*https://mdbcdt.com/DOCS-1260/explain-in-the-slow-query-log.html*|https://mdbcdt.com/DOCS-1260/explain-in-the-slow-query-log.html]
* [*https://mdbcdt.com/DOCS-1260/explain.html*|https://mdbcdt.com/DOCS-1260/explain.html]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1edafd9f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"{branch={count=1, dataType=branch}, json={""cachedValue"":{""errors"":[],""summary"":{""branch"":{""overall"":{""count"":1,""lastUpdated"":""2019-10-09T19:55:44.000-0700"",""dataType"":""branch""},""byInstanceType"":{""GitHub"":{""count"":1,""name"":""GitHub""}}}}},""isStale"":true}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzqn7q:zzzzzzzzzzzzzzzzzzzzzzzz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2019-10-09 18:34:55.0,2019-10-09 18:34:55.0,2019-10-09 18:34:55.0,,"09/Oct/19 11:34 AM;5ba2f5ff2e85d12eb4fffaf5;I am going to change two docs for this. This is what I’m going to do:



[https://mariadb.com/kb/en/library/explain-in-the-slow-query-log/|https://mariadb.com/kb/en/library/explain-in-the-slow-query-log/]  (doc # 3940)

* (/) The page should mention that these two new columns were added in MariaDB 10.1.
* (/) Use Geoff’s sample from the MDEV ticket instead of reverse-engineering the existing sample. It’s simpler than the present sample but will serve the purpose of showing that the new cols appear in the Slow Query Log.
* (/) The page should mention that these two new columns are not printed with normal {{EXPLAIN}} output. They are printed with {{ANALYZE}} output. Use descriptions found here [https://mariadb.com/kb/en/library/analyze-statement/|https://mariadb.com/kb/en/library/analyze-statement/]



[https://mariadb.com/kb/en/library/explain/|https://mariadb.com/kb/en/library/explain/]  (doc # 782)

The page currently says this:

{quote}ANALYZE statement, which performs the query as well as producing EXPLAIN output, and provides actual as well as estimated statistics, has been available from MariaDB 10.1.0.{quote}

This is not very clear. It should probably say something like this:

{quote}(/) In MariaDB 10.1.0 and later, MariaDB also supports the ANALYZE statement. The ANALYZE statement is similar to the EXPLAIN statement, but it actually executes the query. The ANALYZE satement adds the r_rows and r_filtered columns to the output to show how the real values differ from the estimated values. Link to [https://mariadb.com/kb/en/library/analyze-statement/|https://mariadb.com/kb/en/library/analyze-statement/]{quote}

The table of individual columns shown in typical explain output will not be changed.","09/Oct/19 5:05 PM;5ba2f5ff2e85d12eb4fffaf5;Here’s my slack conversation w/Geoff regarding above:

[*JoAnn Newcomb*|https://app.slack.com/team/UD0NV1SLU] [11:38 AM|https://mariadb.slack.com/archives/DHW9WC7PE/p1570646330026900]

okdoke. Have changed the DOCS ticket to outline what I'm doing. It's pretty much from the original MDEV but you may wish to double-check. [https://mariadbcorp.atlassian.net/browse/DOCS-1260|https://slack-redir.net/link?url=https%3A%2F%2Fmariadbcorp.atlassian.net%2Fbrowse%2FDOCS-1260]
I will not change the list of standard cols returned from EXPLAIN normally...

[11:39 AM|https://mariadb.slack.com/archives/DHW9WC7PE/p1570646391028000]

Thanks again Geoff for clarifying all this... I'm sorry I did not interpret this correctly before...

[*geoff*|https://app.slack.com/team/U03G0CMMZ] [11:41 AM|https://mariadb.slack.com/archives/DHW9WC7PE/p1570646491028400]

looks good. no worries. it is a pretty confusing topic

[*JoAnn Newcomb*|https://app.slack.com/team/UD0NV1SLU] [11:42 AM|https://mariadb.slack.com/archives/DHW9WC7PE/p1570646574029100]

Big disconnect was that I didn't catch those cols were unique to slow query log and analyze",09/Oct/19 8:04 PM;5ba2f5ff2e85d12eb4fffaf5;I’ve made these changes and have asked Geoff to give me his feedback. Want to tweak a couple minor things if I have power in the morning…,10/Oct/19 9:32 AM;5ba2f5ff2e85d12eb4fffaf5;Looked at this again and have decided no further changes are needed. I have passed both docs I changed past Geoff and he said changes to each doc looked good. Moving to Test.,05/Nov/19 10:02 AM;5b64ff6035712e3b81c6a5a7;Geoff: Please confirm you agree with the conclusion on this ticket.,"05/Nov/19 11:30 AM;557058:44227755-29b4-410c-87c5-9af07ac490ed;Yeah, I agree. Looks good to me. Thanks\!",,,,,,,,,,,,,,,,,,,,,,,To Do,07/Oct/22 6:23 AM
Configuration manager does not let Xpand instances set slow query logging to zero,DBAAS-13612,221692,New Feature,Verified,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Critical,Fixed,Jacob Wiltse,6234047e75f257006a9b38c5,Isaac Venn,5a9a68e17cbc742a5c1dc71a,Isaac Venn,5a9a68e17cbc742a5c1dc71a,22/May/23 9:39 AM,22/Jun/23 12:48 AM,,21/Jun/23 8:09 AM,,SkySQL 2.0 06/23 Release,,,,,0,Configuration_Manager,Logging,skysql,Xpand,"The skysql configuration manager only allows three possible settings for the slow query log threshold.  None of them are zero which is required if the client wants to log all queries.
Setting it to zero is essentially turning on full query logging and does create significant load on the storage layer. I suggest having some sort of warning for the zero setting so it is not set accidentally or without knowledge of the impact.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,DBAAS-13885,,,,,,,22/Jun/23 12:46 AM;ug:2bc158c8-2a8b-4e2d-bc2f-cac3822b831b;session_log_slow_threshold_ms=0.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/36684,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@c16705a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Evgeniy Trifonov,62b4ff4042d926a01e53fdc7,"Test env:
Release 2.1.2131
Operator 2.1.2507
MOE v1.6.14
UI v2.21.1",,,,2|hzzomn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2023-05-24 05:17:48.0,2023-05-24 05:17:48.0,2023-05-24 05:17:48.0,1_*:*_1_*:*_572014000_*|*_10110_*:*_1_*:*_955048000_*|*_10045_*:*_2_*:*_522068000_*|*_10100_*:*_2_*:*_103774000_*|*_10102_*:*_1_*:*_0_*|*_10017_*:*_2_*:*_11166000_*|*_10115_*:*_2_*:*_482516000,23/May/23 10:17 PM;5ba2f5f21a21b82e9bea1631;Agree that 0 should be added to the list of supported values. ,26/May/23 9:24 AM;623d06c84a57610068e7d439;Tagging [~accountid:712020:d170a8c7-843d-4a14-a47f-15f5b16315ad] and [~accountid:6234047e75f257006a9b38c5],29/May/23 12:51 AM;712020:d170a8c7-843d-4a14-a47f-15f5b16315ad;[~accountid:5a9a68e17cbc742a5c1dc71a] Could you please confirm that you talk about *session_log_slow_threshold_ms*?,"05/Jun/23 9:23 AM;6076313c115da6006f316785;Customer need is to actually see all queries being run. For testing purposes.
The how is by setting slow queries to 0.

Xpand allows this but the skysql configuration manager doesnt.
UI fixed needed only?

Workaround: manual intervention via the database (global variable) - customer can not do it themselves.","07/Jun/23 10:22 AM;623d06c84a57610068e7d439;[~accountid:6234047e75f257006a9b38c5], can you please take a look at this?",09/Jun/23 1:49 AM;712020:d170a8c7-843d-4a14-a47f-15f5b16315ad;[~accountid:6234047e75f257006a9b38c5] I updated the sheet and made the field to accept free test numbers from 0 and 1000000. Please review it and import. ,21/Jun/23 3:13 AM;712020:d170a8c7-843d-4a14-a47f-15f5b16315ad;[~accountid:6234047e75f257006a9b38c5] the min and max values are not returned from the backend per [~accountid:6286dabfcc1d15006fac56fc],"22/Jun/23 12:47 AM;62b4ff4042d926a01e53fdc7;Verified on Test env.
!session_log_slow_threshold_ms=0.png|thumbnail! ",,,,,,,,,,,,,,,,,,221662,DBAAS-13702,Configuration Manager Improvements for June 2023,Done,22/Jun/23 12:48 AM
Verify Chargify Supports Desired Billing Strategy,DBAAS-12676,230231,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Done,Eric Fox,5c994629d286431f402dab95,Eric Fox,5c994629d286431f402dab95,Eric Fox,5c994629d286431f402dab95,16/Feb/23 11:45 AM,21/Apr/23 7:27 AM,,21/Apr/23 7:27 AM,,Sky 2.0 Mar GA,,SkySQL Billing,,,0,,,,,"From [ROS Pricing Proposal|https://docs.google.com/document/d/1f3HNzyAq9cCLm1LMB3E7xNohfVZitLECOQVPSUUgSMc/edit]

{quote}ROS
* Only 1 Tier
* On-prem customers will pay $42 per month per server to use this service
* For SkySQL customers, the service will be included with their cluster fees, with the same storage and data transfer limits and additional charges listed below
* 1 minute resolution and up; additional $20 per month per server for 15 second resolution
* 50 Observability API requests per minute; additional $20 per month per server for unlimited API requests
* Included features: API access, alarms, events, WLA
* Logging features: Error, Slow Query, Audit, General Query, MaxScale
* Storage and data transfer limits and additional charges
** 100GB free metrics and log storage space, $0.03 per GB per month if exceeded
** 100GB free metrics and log data transfer, $0.25 per GB per month of log data transferred after
{quote}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16/Feb/23 1:11 PM;eric.fox;image-2023-02-16-13-11-58-582.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/32077,16/Feb/23 1:13 PM;eric.fox;image-2023-02-16-13-13-08-779.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/32078,16/Feb/23 1:36 PM;eric.fox;image-2023-02-16-13-36-15-467.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/32080,16/Feb/23 1:36 PM;eric.fox;image-2023-02-16-13-36-17-255.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/32081,16/Feb/23 1:37 PM;eric.fox;image-2023-02-16-13-37-16-753.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/32082,16/Feb/23 1:10 PM;eric.fox;screenshot-1.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/32083,16/Feb/23 1:17 PM;eric.fox;screenshot-2.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/32084,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@31a541c3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Release bundle on test:
N/A",,,,2|hzzgu7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL  Release Sprint,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1_*:*_1_*:*_6908000_*|*_6_*:*_1_*:*_0_*|*_10099_*:*_1_*:*_3000_*|*_10110_*:*_1_*:*_5503600000_*|*_10045_*:*_2_*:*_12000_*|*_10115_*:*_1_*:*_11000,"16/Feb/23 11:48 AM;5c994629d286431f402dab95;as discussed on 2023/02/16 - research chargify to ensure that our desired billing strategy is supported.

[~accountid:5c994629d286431f402dab95] will review chargify
* recurring monthly
* $42 for first server
* $20 for additional servers
* pro-rated based on partial billing cycle","16/Feb/23 1:10 PM;5c994629d286431f402dab95;Tiered pricing appears to be the available option in chargify

 !image-2023-02-16-13-37-16-753.png|thumbnail! 

 !image-2023-02-16-13-11-58-582.png|thumbnail! 

 !image-2023-02-16-13-13-08-779.png|thumbnail! ","16/Feb/23 1:17 PM;5c994629d286431f402dab95;Example of prorated component invoicing:

 !image-2023-02-16-13-36-17-255.png|thumbnail! ",,,,,,,,,,,,,,,,,,,,,,,215939,MDBM-4659,Billing support for SkySQL monitoring service - Phase 1,Done,21/Apr/23 7:27 AM
Enable slow query log on dev CMDB,DBAAS-12084,230028,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Fixed,Hristiyan Nikolov,615f8abea707100069c04938,Hristiyan Nikolov,615f8abea707100069c04938,Hristiyan Nikolov,615f8abea707100069c04938,28/Nov/22 6:45 AM,12/Dec/22 12:22 AM,,12/Dec/22 12:22 AM,,SkySQL 2.0 Beta,,SkySQL 2.0 Infrastructure ,,,0,,,,,https://mariadb.slack.com/archives/C047YNB3EAU/p1668497651564089,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2f166b03,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzzben:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1_*:*_1_*:*_1186620000_*|*_6_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Dec/22 12:22 AM
Configuration parameters for the slow query logs,DBAAS-10660,220803,Story,Verified,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Blocker,Fixed,Boris Besky,605d5cfe0a9b690071bf673a,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Ivan Zlatoustov,5a72dbfd9f949328111290a6,12/Aug/22 1:42 AM,22/Nov/22 5:09 AM,,21/Nov/22 7:08 AM,,SkySQL 2.0 Beta,,SkySQL Customer Portal,,,0,RTP-must-have,,,,"We need to add the following options to config manager

log_slow_rate_limit
Default: 1
Values: 1, 10, 100

log_slow_verbosity
Default: """"
Values:
all permutations of query_plan, explain, innodb are valid values.

log_slow_filter
Default: admin,filesort,filesort_on_disk,filesort_priority_queue,full_join,full_scan,not_using_index,query_cache,query_cache_miss,tmp_table,tmp_table_on_disk
Values:
all permutations of the above values.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,DBAAS-11500,DBAAS-10290,,,,,DBAAS-11940,,DBAAS-11500,,,,14/Oct/22 8:07 AM;712020:fbe13db5-68d8-4fd1-8afa-cb98d771c36c;Screenshot from 2022-10-14 11-06-51.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/38471,15/Nov/22 7:38 AM;dobrinka.topuzova;Screenshot_48.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/38473,17/Nov/22 3:25 AM;ug:2e5d741a-8f89-4248-9eb6-f4a59bbf8c4d;multi-values selection dropdown.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/38475,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@57c69957,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Dobi Topuzova,5a72dbf28a7b1d1e8c6433b7,,,,,2|hzyzfb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Spike 2: SkySQL 2.0 Bug fixing,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-08-15 14:55:11.0,2022-08-15 14:55:11.0,2022-08-15 14:55:11.0,1_*:*_1_*:*_287825000_*|*_10099_*:*_1_*:*_3000_*|*_10110_*:*_1_*:*_460138000_*|*_10100_*:*_4_*:*_231798000_*|*_10045_*:*_2_*:*_1284000_*|*_10102_*:*_1_*:*_0_*|*_10115_*:*_3_*:*_7847782000,15/Aug/22 7:55 AM;5e905dba2ccfbf0b903eaa6f;[~accountid:5a72dc0fdca0242a1ca8387a] - We need to update the default values in the SkySQL releases for these variables.,"15/Aug/22 9:39 AM;5f52cf95333edb004358a14b;The following variables have been promoted to the TEST instance:
* log_slow_rate_limit
* log_slow_verbosity
* log_slow_filter","16/Aug/22 8:53 AM;5a72dbf28a7b1d1e8c6433b7;The variables are promoted but:
* log_slow_rate_limit - the default value isn't '1' for all topologies 
* log_slow_verbosity - the default value isn't empty str for all topologies and the user couldn't select multiple options at once in the Portal   
* log_slow_filter - the user couldn't select multiple options at once in the Portal

- Single Node Transactions and Replicated Transactions in GCP and AWS


{code:java}
MariaDB [(none)]> show global variables like '%log_slow%';
+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variable_name                | Value
                                                   |
+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
| log_slow_admin_statements    | ON
                                                   |
| log_slow_disabled_statements | sp
                                                   |
| log_slow_filter              | admin,filesort,filesort_on_disk,filesort_priority_queue,full_join,full_scan,not_using_index,query_cache,query_cache_miss,tmp_table,tmp_table_on_disk |
| log_slow_rate_limit          | 1000
                                                   |
| log_slow_slave_statements    | ON
                                                   |
| log_slow_verbosity           | query_plan
                                                   |
+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
{code}


- Single Node Analytics and Multi-Node Analytics in GCP and AWS


{code:java}
MariaDB [(none)]> show global variables like '%log_slow%';
+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| Variable_name                | Value
                                   |
+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| log_slow_admin_statements    | ON
                                   |
| log_slow_disabled_statements | sp
                                   |
| log_slow_filter              | admin,filesort,filesort_on_disk,filesort_priority_queue,full_join,full_scan,query_cache,query_cache_miss,tmp_table,tmp_table_on_disk |
| log_slow_rate_limit          | 1
                                   |
| log_slow_slave_statements    | ON
                                   |
| log_slow_verbosity           |
                                   |
+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------+
{code}



P.S. And documentation links should be updated.","12/Oct/22 4:10 AM;5a72dbfd9f949328111290a6;This has to be fixed, it makes the slow query logs unusable. 
[~accountid:5a7740f1f8321921e181f3ff]","13/Oct/22 10:19 AM;5a7740f1f8321921e181f3ff;[~accountid:5a72dbf28a7b1d1e8c6433b7] quick question: if you set log_slow_rate_limit=1 from the portal, does it get applied to the running service? Is this a work around for ""default"" setting? can you pls get back to us asap?

 [~accountid:5e905dba2ccfbf0b903eaa6f] [~accountid:623d06c84a57610068e7d439] this is the is ticket I was talking about. if we are able to set from portal and if gets applied to the running service, we are ok with documentation updates.

 [~accountid:712020:fbe13db5-68d8-4fd1-8afa-cb98d771c36c]. fyi, this is the ticket you were talking about right? My understanding is that (based on my conversation with nachiket), that it can be set in the portal and applied to the running service. If that is the case, we need to document this. 

[~accountid:5e905dba2ccfbf0b903eaa6f] [~accountid:5a72dc154ab43429358cbaad] can we set the value as 1 by default for all new services in sky2.0?


And also important question Dobrinka raises is that, how can an user select multiple values for the ""log_slow_filter"" parameter from the portal? [~accountid:712020:acea214c-8472-4032-96a1-8f4e74a91502], [~accountid:6041ad7c20122b0068998a24] do we've a way to do this in the Sky2.0 config manager UI?

","13/Oct/22 1:21 PM;5e905dba2ccfbf0b903eaa6f;[~accountid:5a7740f1f8321921e181f3ff],
Yes we can change the default to 1 in 2.0. We need a story to keep track.

Currently, we cannot select multiple values for a variable. ","14/Oct/22 1:43 AM;5a72dbf28a7b1d1e8c6433b7;[~accountid:5a7740f1f8321921e181f3ff] As I remember it gets applied to the running service. Unfortunately, the SkySQL 1.0 on Test env isn't working and I can't double check.","28/Oct/22 8:22 AM;5e905dba2ccfbf0b903eaa6f;[~accountid:5a72dc0fdca0242a1ca8387a], [~accountid:5a72dc154ab43429358cbaad], [~accountid:6234047e75f257006a9b38c5],

Let's take this up for the 2.0 immediately for the next release build.","28/Oct/22 8:53 AM;5a72dc154ab43429358cbaad;added 
{code}
        log_slow_rate_limit: 1
        log_slow_verbosity: """"
        log_slow_filter: ""admin,filesort,filesort_on_disk,filesort_priority_queue,full_join,full_scan,not_using_index,query_cache,query_cache_miss,tmp_table,tmp_table_on_disk""
{code}
for transactional and analytical",28/Oct/22 9:14 AM;5a72dc154ab43429358cbaad;assigned to [~accountid:6234047e75f257006a9b38c5] as these also need to be added to the dps,"15/Nov/22 7:38 AM;5a72dbf28a7b1d1e8c6433b7;These variables are missing in the list:
* log_slow_rate_limit
* log_slow_verbosity
* log_slow_filter
 !Screenshot_48.png|thumbnail! ","15/Nov/22 8:38 AM;6234047e75f257006a9b38c5;These values were added to DPS.  However, they are currently hidden from the UI because the source of truth spreadsheet has no values listed for the ""possible values"".  Right now the UI doesn't have support for free-form input for config values, so they would show up with an empty drop down.  I'm going to defer to [~accountid:5e66a51e77d46c0cf93ad5f5] for a solution here.","15/Nov/22 11:19 PM;5a72dc0fdca0242a1ca8387a;[~accountid:6041ad7c20122b0068998a24]h , [~accountid:5e66a51e77d46c0cf93ad5f5] can you please advice how we should proceed here ?","16/Nov/22 7:09 PM;623d06c84a57610068e7d439;[~accountid:5a72dc154ab43429358cbaad], need your input here. Please help!","16/Nov/22 10:29 PM;5a72dc154ab43429358cbaad;I'm not sure what I can do here.
I've already provided the default values for these.
They apparently require changes to the UI. They work on the backend already.","17/Nov/22 2:47 AM;6286dabfcc1d15006fac56fc;[~accountid:623d06c84a57610068e7d439] [~accountid:5a72dc0fdca0242a1ca8387a]
I am not getting backend responses for these variables, else they would have shown up automatically in the table. I haven't applied any logic to hide any of the config variables.
For Single Node topology, I receive 70 variables from API and all of those are displayed in the table","17/Nov/22 3:20 AM;5a72dc154ab43429358cbaad;there seems to be a lot of misunderstanding here so let me clarify in one place as well as I can

These variables are in DPS , but are *disabled* in DSP
The reason is that, as the ticket description say, they should support *all permutations* of some values.
As far as I know there is no way to have such variables in the UI (I'm not sure about the dps api). These would require a dropdown with multi-select checkboxes so the user can select multiple options at the same time.
Even if we enable them in DPS right now, the UI will not work correctly with them

example:
log_slow_verbosity can have these values : <(Empty), query_plan, innodb, explain> and any of their permutations
so a possible value could be ""innodb"" or ""query_plan,explain"" or ""query_plan, innodb, explain""
to get this to work you either need a dropdown with checkboxes or some freetext field on the UI
which we don't have as far as I know

similar situation for log_slow_filter","17/Nov/22 3:21 AM;5a72dc154ab43429358cbaad;log_slow_rate_limit seems like it could be enabled now though, it's just a single value int","17/Nov/22 3:25 AM;6286dabfcc1d15006fac56fc;Multi-value select support has already been added in UI few days back-
 !multi-values selection dropdown.png|thumbnail! ","17/Nov/22 3:30 AM;5a72dc154ab43429358cbaad;well, I guess we could enable these then","17/Nov/22 3:37 AM;6286dabfcc1d15006fac56fc;Shall I assign this ticket to you if these need to be enabled from backend?
As they will automatically show up on UI once available in response","17/Nov/22 3:42 AM;5a72dc154ab43429358cbaad;ok I re-read what Jake wrote and the actual reason they are missing is that someone should update the spredsheet with the possible values
This is something [~accountid:5e66a51e77d46c0cf93ad5f5] is supposed to to if I'm not mistaken","17/Nov/22 8:06 AM;623d06c84a57610068e7d439;Thanks a lot [~accountid:5a72dc154ab43429358cbaad] for all the details. [~accountid:5e66a51e77d46c0cf93ad5f5], can you help coordinate with the backend and get this done? Slow query logs has been a long time ask and this would be a big win.","21/Nov/22 7:07 AM;5a72dc0fdca0242a1ca8387a;Pasting [~accountid:605d5cfe0a9b690071bf673a]'s comment from DBAAS-11500. Moving the ticket to test since DBAAS-11500 is already there

I added possible values to the params below:
log_slow_rate_limit
log_slow_verbosity
log_slow_filter
lower_case_table_names
https://docs.google.com/spreadsheets/d/105C6qS58gnBOKvauIv_czxxN8rEzKBwY-C-LGcFMKWU/edit#gid=138882613",22/Nov/22 5:09 AM;5a72dbf28a7b1d1e8c6433b7;The variables with corresponding values are added.,229126,DBAAS-10329,DB Config management,Done,22/Nov/22 5:09 AM
Slow query log not fully configurable,DBAAS-10338,224317,Story,Open,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Critical,,Boris Besky,605d5cfe0a9b690071bf673a,Jacob Moorman,712020:fbe13db5-68d8-4fd1-8afa-cb98d771c36c,Jacob Moorman,712020:fbe13db5-68d8-4fd1-8afa-cb98d771c36c,15/Jul/22 8:55 AM,26/Jul/22 5:43 AM,,,,Chokai Ice Box,,SkySQL Customer Portal,,,1,Chokai-UAT-2,,,,"Slow query log can be enabled and long_query_time can be set.

Not currently configurable:

* log_queries_not_using_indexes
* log_slow_admin_statements
* log_slow_disabled_statements
* log_slow_filter
* log_slow_rate_limit
* log_slow_slave_statements
* log_slow_verbosity
* min_examined_row_limit
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2b43755f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzywev:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,
Build a mechanism for generation of slow query log file,DBAAS-10086,224156,Story,Open,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,,,Ashutosh Kulkarni,60e8e3bc0dd4f60076c7f6a2,Ashutosh Kulkarni,60e8e3bc0dd4f60076c7f6a2,07/Jun/22 12:44 AM,11/Jan/23 9:29 AM,,,,,,N/A,,,0,,,,,"One should be able to trigger
1. Collection of slow query log with appropriate configuration
2. Copy the file so generated
3. Post the file to policy engine service

Build mechanism for collection of slow query log.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,DBAAS-10290,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7745b5ff,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzytbb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,222224,DBAAS-9990,Auto-tuning P1,To Do,
Add API endpoints to policy engine service for integration with indexer,DBAAS-10080,228994,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Fixed,Ashutosh Kulkarni,60e8e3bc0dd4f60076c7f6a2,Ashutosh Kulkarni,60e8e3bc0dd4f60076c7f6a2,Ashutosh Kulkarni,60e8e3bc0dd4f60076c7f6a2,07/Jun/22 12:00 AM,28/Jun/22 3:53 AM,,21/Jun/22 5:08 AM,,N/A,,N/A,,,0,,,,,"Add API endpoints to policy engine service for integration with indexer. Create following endpoints

POST /upload_slow_query_log
GET /indexer_recommendations",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7fb51d92,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzyt9z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1_*:*_1_*:*_262391000_*|*_6_*:*_1_*:*_0_*|*_10045_*:*_1_*:*_965699000,"21/Jun/22 5:07 AM;60e8e3bc0dd4f60076c7f6a2;Added following API endpoints:

GET /ia/get_index_advice/{database_instance}
POST /ia/upload_slow_queries/{database_instance}
PUT /ia/enable_index_advisor/{database_instance}
PUT /ia/disable_index_advisor/{database_instance}

Additional tables are created in policy database for storing indexer's internal state and credentials of services. This schema is put in file policy_based_automation/db/migrations/V0.0.2_create_indexer_schema.sql",,,,,,,,,,,,,,,,,,,,,,,,,222224,DBAAS-9990,Auto-tuning P1,Done,21/Jun/22 5:08 AM
Auto-tuning P1,DBAAS-9990,222224,Epic,In Progress,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Nachiket Bahekar,5e905dba2ccfbf0b903eaa6f,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Ivan Zlatoustov,5a72dbfd9f949328111290a6,23/May/22 8:50 AM,22/Jan/23 10:17 AM,,,,Chokai-2,,,,,0,pmmtchokai-fix,,,,"h3. Basic automation capabilities.
those services should be made available for chosen production customers as part of Chokai-2. 
They will be limited to production customers and enabled by SOP. It is clear that this is an experimental feature (Technical Preview) and should be applied on non production loads. 

# Autoscaling
Automatic scaling of a disk-based on predefined triggers.
# Auto-indexing insights 
Provides workload optimization insights based on uploaded slow query log ( Raw format logs from SkySQL Log Archive should be supported)
# Auto-indexing create index is a stretch goal

h3. Limitations 
No real UI. The autoindexing functionality should be accessable vie the API or swagger UI
All services will be enabled by SOP provided as part of this deliverable.

h3. SOPs
# Create alerting rules (triggers) for the autoscaling. 
# Create a database user account for the auto-indexing 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@787af938,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-6,Auto-tuning P1,,To Do,,,,,,,,,,,,,,,,,,,,,,green,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzyshz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-05-27 20:07:48.0,2022-05-27 20:07:48.0,2022-05-27 20:07:48.0,,"27/May/22 1:07 PM;623d06c84a57610068e7d439;[~accountid:5a72dbfd9f949328111290a6], can you remove the pmmtchokai-fix label? This needs to go into SkySQL 2.0. Thanks","30/May/22 3:26 AM;5a72dbfd9f949328111290a6;[~accountid:623d06c84a57610068e7d439] This is an essential spike and is still being considered for limited release way before SkySQL 2.0, likely Chokai Fix  
The scope is being revisited to a standalone independent service, let's discuss it later this week.
I am working with [~accountid:712020:bc64021c-c884-4911-8d2d-235eceb97b3a], [~accountid:5e905dba2ccfbf0b903eaa6f], and [~accountid:60e8e3bc0dd4f60076c7f6a2] to narrow down the scope to something that can tick this mark. Once we have an agreement it will be updated here, or the ticket will be moved.

This should achieve a big impact with relatively small and safe efforts, being delayed for 7-8 months and it is about time to get something working to show internally and to some trusted customers. 

Note: The ""pm*"" labels represent the prioritization from the product team, not the actual delivery release which might differ when the items slip, etc. for us it is Chokai for deliver it can be Choka, Chokai Hotfix, Chokay Fix, etc. ",22/Jan/23 10:17 AM;623d06c84a57610068e7d439;Let's close out based on what's already implemented and what's pending,,,,,,,,,,,,,,,,,,,,,,,,,,In Progress,14/Jun/22 12:49 AM
"MOE: Provision initial DB cluster Logs infrastructure for Audit,Slow Query and General logs",DBAAS-9513,228701,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Do,Fares Bessrour,60820ebe1417e2006afe6d46,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,28/Mar/22 5:01 AM,27/Apr/22 8:12 AM,,27/Apr/22 8:12 AM,,Chokai-2,,SkySQL Cloud Automation (MOE),,,1,,,,,"Moe should provision the initial DB cluster K8s objects that would move Audit,Slow Query and General for the DB nodes to Stardust customer buckets

The initial provisioning task includes:
- Creation of two ConfigMaps objects : fluent-bit-server-sidecar and fluent-bit-scripts-sidecar
These should  be present in the namespace of the MariaDB object

- Initialization scripts preparation

Code samples and detail objects description is available here:
[https://mariadbcorp.atlassian.net/wiki/spaces/SKYENG/pages/1622049342/Operator+logging+and+metrics+as+a+sidecar|https://mariadbcorp.atlassian.net/wiki/spaces/SKYENG/pages/1622049342/Operator+logging+and+metrics+as+a+sidecar]

List of services impacted by this change is available below:
- Transactional service - slow query , audit & general logs
- Analytical(single & multi node) - slow query , audit & general logs
- Xpand( single & multi node) - slow query, & general logs


",,,,,,,,,,,,,,,,,,,,,,,,DBAAS-9380,,,DBAAS-9512,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4b94bd55,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzyntr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai Fix Sprint 1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-03-28 17:34:58.0,2022-03-28 17:34:58.0,2022-03-28 17:34:58.0,1_*:*_1_*:*_119072000_*|*_6_*:*_1_*:*_0_*|*_10110_*:*_1_*:*_487593000_*|*_10099_*:*_1_*:*_1996827000_*|*_10045_*:*_1_*:*_4000_*|*_10115_*:*_1_*:*_5000,"28/Mar/22 10:34 AM;5fc97cbc4a09640069852320;Here's a quick writeup:
https://mariadbcorp.atlassian.net/wiki/spaces/SKYENG/pages/1622049342/Operator+logging+and+metrics+as+a+sidecar#Logging

It explains requirements from MOE, SNOW and the config manager. Don't use the examples in the writeup.","29/Mar/22 2:05 PM;5f5307d53aa35b003fbfdde0;Based on reading the documentation, this will not work as currently designed.  The dependencies for deploying a database will be changing with this new requirement.

Currently we run database provisioning and stardust provisioning in parallel.  Stardust provisioning creates the logging buckets and the credentials required to post to those buckets.  With this change, we are implying that database provisioning will be dependent on those buckets and credentials already existing.  This means that we are making database provisioning dependent on stardust provisioning, or that we would have to restart the database pods once stardust is provisioned.  In addition to lengthening database provisioning time, this would require serious workflow changes and cannot be rushed out.

The single stardust logging bucket per customer was a feature that we rushed out for Bandai.  During discussions, we acknowledged that it was seriously flawed and not maintainable long term.  This needs to be changed so that we can deploy logging buckets at cluster or database provisioning time.  The blocker on this is that Stardust needs a way to access and aggregate these logs across multiple cloud providers.  This feature needs large scale architecture and design review.

","29/Mar/22 2:27 PM;5fc97cbc4a09640069852320;While I disagree with [~accountid:5f5307d53aa35b003fbfdde0] that this will not work, I do agree changing/adding dependencies last minute is a bad idea.

 One thing to add on his point in the architecture and design review. Coupling anything always complicates things and increases possibilities for errors. In this case, coupling Stardust components into the Operator and further coupling MOE into the Stardust component coupled into the Operator seems unnecessary. 

A much better design would be to remove all fluentbit and prometheus containers from the mariadb operator charts altogether(both logging and metrics sidecars). Then, Stardust creates an admission controller that will add those containers and their configs and secrets to the mariadb database without the operator and MOE ever knowing about it. This is much better, as Stardust already have their system setup, access to their secrets and cloud resources (buckets). Additionally, they can add buckets to the operator without any change in the operator and moe.","30/Mar/22 2:49 AM;5bca82e15c85706a3f096963;[~accountid:5f5307d53aa35b003fbfdde0][~accountid:605d5cfe0a9b690071bf673a] [~accountid:5a72dc079f949328111290a8]
-An idea for the long term proposal, we use an internal bucket, then from said bucket a cloud function/lambda migrates the data to the customers bucket?-

Better ideas are being put forward.","04/Apr/22 5:32 AM;5a72dc0fdca0242a1ca8387a;considering the above concerns , PoC with an alternative implementation was started 
https://jira.mariadb.org/browse/DBAAS-9380?focusedCommentId=218991&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-218991",04/Apr/22 5:33 AM;5a72dc0fdca0242a1ca8387a;This story is now blocked by DBAAS-9380,"11/Apr/22 6:04 AM;5a72dc0fdca0242a1ca8387a;This feature will go in a fix release, right after Chokai.
Please make sure your changes  are not in the Chokai release branch, or the main brach, until Chokai is out and we switch to the Chokai Fix release",27/Apr/22 8:12 AM;60820ebe1417e2006afe6d46;DBAAS-9380 solves this,,,,,,,,,,,,,,,,,,215925,MDBM-3479,Logs Archive: New logs types,Done,27/Apr/22 8:12 AM
MOE: Configuration Manager change: Add pass through support for Slow Query Log & Audit Logs values ,DBAAS-9512,228700,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Do,Fares Bessrour,60820ebe1417e2006afe6d46,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,28/Mar/22 4:25 AM,27/Apr/22 8:12 AM,,27/Apr/22 8:12 AM,,Chokai-2,,SkySQL Cloud Automation (MOE),,,0,,,,,"Moe should provide support for passing through the 'Slow Query' and Audit logs as a database parameters to the MDB Operator.

The Slow Query Log and Audit logs are new addition to the Configuration Manager parameters, added in Chokai.
The existing Error logs pass through functionality could be used as reference implementation.
",,,,,,,,,,,,,,,,,,,,,,,,DBAAS-9513,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4a2e9f73,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzyntj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai Fix Sprint 1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-04-27 15:12:58.0,2022-04-27 15:12:58.0,2022-04-27 15:12:58.0,1_*:*_1_*:*_608638000_*|*_6_*:*_1_*:*_0_*|*_10099_*:*_1_*:*_1996987000_*|*_10045_*:*_1_*:*_24000,"11/Apr/22 6:04 AM;5a72dc0fdca0242a1ca8387a;This feature will go in a fix release, right after Chokai.
Please make sure your changes  are not in the Chokai release branch, or the main brach, until Chokai is out and we switch to the Chokai Fix release",27/Apr/22 8:12 AM;60820ebe1417e2006afe6d46;DBAAS-9380 solves this,,,,,,,,,,,,,,,,,,,,,,,,215925,MDBM-3479,Logs Archive: New logs types,Done,27/Apr/22 8:12 AM
ServiceNow: Add  Slow Query  and Audit Logs as a parameters in the Config manager ,DBAAS-9511,228699,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Do,Nachiket Bahekar,5e905dba2ccfbf0b903eaa6f,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,28/Mar/22 4:11 AM,06/Jun/22 8:51 AM,,06/Jun/22 8:51 AM,,Chokai-2,,SkySQL ServiceNow,,,0,,,,,"Initial setup:
* Transactional service - slow query & audit - disabled by default
* Analytical(single & multi node) - slow query & audit - disabled by default
Out of scope
* Xpand( single & multi node) ",,,,,,,,,,,,,,,,,,,,,,,,DBAAS-9380,MDBM-3843,,,,,,,,,,DBAAS-9510,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7585b2cc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Dobi Topuzova,5a72dbf28a7b1d1e8c6433b7,,1.0,,,2|hzyntb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai Fix Sprint 1,SkySQL Chokai-2 Sprint 2,SkySQL Chokai-2 Sprint 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-05-20 18:02:14.0,2022-05-20 18:02:14.0,2022-05-20 18:02:14.0,1_*:*_1_*:*_609735000_*|*_6_*:*_1_*:*_0_*|*_10099_*:*_1_*:*_5010080000_*|*_10045_*:*_2_*:*_13000_*|*_10115_*:*_1_*:*_444967000,"11/Apr/22 6:04 AM;5a72dc0fdca0242a1ca8387a;This feature will go in a fix release, right after Chokai.
Please make sure your changes  are not in the Chokai release branch, or the main brach, until Chokai is out and we switch to the Chokai Fix release","20/May/22 11:02 AM;623d06c84a57610068e7d439;[~accountid:5e905dba2ccfbf0b903eaa6f], the list of configurations have been defined in MDBM-3843. Who can we assign this so MaaS work can continue?","20/May/22 2:20 PM;5e905dba2ccfbf0b903eaa6f;[~accountid:623d06c84a57610068e7d439], [~accountid:605d5cfe0a9b690071bf673a]- We are looking for clear definition of variable names and its possible values to be defined in this jira and in this document: https://docs.google.com/spreadsheets/d/105C6qS58gnBOKvauIv_czxxN8rEzKBwY-C-LGcFMKWU/edit#gid=1927489557

","01/Jun/22 5:13 AM;5a72dc0fdca0242a1ca8387a;[~accountid:5e905dba2ccfbf0b903eaa6f] is this now duplicate of DBAAS-9510 ?
Since now additional logs handling configuration is planned at the moment , can we close this story now and leave just DBAAS-9510 as a placeholder for the changes in the config manager 
",,,,,,,,,,,,,,,,,,,,,,215925,MDBM-3479,Logs Archive: New logs types,Done,06/Jun/22 8:51 AM
SkySQL Portal: Add option to enable/disable Slow Query and  Audit Logs in the Configuration Manager ,DBAAS-9510,220739,Story,Verified,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Fixed,Mohsin Raza,602f003d7fbca20070d66df3,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,28/Mar/22 4:10 AM,03/Jun/22 8:16 AM,,03/Jun/22 6:00 AM,,Chokai-2,,SkySQL Customer Portal,,,0,,,,,"As a SkySQL user, i should be able to go to the Config Manager and enable/disable or configure the Audit and Slow Query logs of a Standalone,HA and ColumnStore service.

A list of Audit and Slow Query logs configuration properties is available here:
https://docs.google.com/spreadsheets/d/105C6qS58gnBOKvauIv_czxxN8rEzKBwY-C-LGcFMKWU/edit#gid=910283215",,,,,,,,,,,,,,,,,,,,,,,,DBAAS-9380,,,,,,,,,,,,,DBAAS-9511,DBAAS-10067,DBAAS-10068,DBAAS-10069,03/Jun/22 5:07 AM;dobrinka.topuzova;2022-06-03 15_05_46-Config-Manager.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/38072,03/Jun/22 5:22 AM;ug:3b5cb950-8eae-4084-afb1-13dc3f828ebc;screenshot-1.png;https://mariadbcorp.atlassian.net/rest/api/3/attachment/content/38074,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1b95c73c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Dobi Topuzova,5a72dbf28a7b1d1e8c6433b7,,1.0,,,2|hzynt3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SkySQL Chokai Fix Sprint 1,SkySQL Chokai-2 Sprint 2,SkySQL Chokai-2 Sprint 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-05-03 17:09:49.0,2022-05-03 17:09:49.0,2022-05-03 17:09:49.0,1_*:*_1_*:*_609765000_*|*_10099_*:*_1_*:*_3724158000_*|*_10045_*:*_2_*:*_1294816000_*|*_10100_*:*_2_*:*_170530000_*|*_10102_*:*_1_*:*_0_*|*_10115_*:*_1_*:*_3007000,"11/Apr/22 6:04 AM;5a72dc0fdca0242a1ca8387a;This feature will go in a fix release, right after Chokai.
Please make sure your changes  are not in the Chokai release branch, or the main brach, until Chokai is out and we switch to the Chokai Fix release","03/May/22 10:09 AM;5e905dba2ccfbf0b903eaa6f;[~accountid:605d5cfe0a9b690071bf673a] [~accountid:5bca82e15c85706a3f096963],

What are the parameter names and possible options it should display in the Config Manager portal? 

Also all the topologies it should be applicable.","31/May/22 9:23 AM;5a72dc0fdca0242a1ca8387a;The logs list & the related configuration is available here:
https://docs.google.com/spreadsheets/d/105C6qS58gnBOKvauIv_czxxN8rEzKBwY-C-LGcFMKWU/edit#gid=910283215",01/Jun/22 7:43 AM;602f003d7fbca20070d66df3;All new config variables deployed to test. ,"03/Jun/22 5:10 AM;5a72dbf28a7b1d1e8c6433b7;Tested:
RELEASE_VERSION: 2.0.1645
MOE_VERSION: runner-v0.7.117
Stardust: 1.7.6

Variables are missing. Only ""server_audit_logging"" variable is available.
 !2022-06-03 15_05_46-Config-Manager.png|thumbnail! ","03/Jun/22 5:22 AM;602f003d7fbca20070d66df3; !screenshot-1.png|thumbnail! 
Please test again and confirm",03/Jun/22 5:57 AM;5a72dbf28a7b1d1e8c6433b7;Now they are visible. Thank you. Please move ticket in testing.,03/Jun/22 7:55 AM;5a72dbf28a7b1d1e8c6433b7;User should be able to enable/disable Slow Query and Audit Logs in the Configuration Manager page.,,,,,,,,,,,,,,,,,,215925,MDBM-3479,Logs Archive: New logs types,Done,03/Jun/22 7:55 AM
Method (or SOP) for Enabling Slow Query Logging,DBAAS-4942,226310,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Do,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Rupert Harwood,6102cb36627b560068caee55,Rupert Harwood,6102cb36627b560068caee55,24/Aug/20 12:34 PM,22/Apr/22 7:47 AM,,11/Apr/22 4:32 AM,Summer Release,Chokai Ice Box,,SkySQL Cloud Automation (MOE),,,0,SOP,,,,"Several customers have requested access to their slow query logs. This is problematic because we currently have slow query log disabled, and per  [#DBAAS-2145] we do not have a method of providing it. This Jira is to cover enabling the slow query log portion of that request.

We think it should be in the Configuration Manager. But we also have to be aware of log pruning and locations.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,DBAAS-2145,MDBM-1410,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7ffc4135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzwt8n:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2022-04-07 13:48:52.0,2022-04-07 13:48:52.0,2022-04-07 13:48:52.0,1_*:*_1_*:*_51379079000_*|*_6_*:*_1_*:*_0,"07/Apr/22 6:48 AM;5a72dc0fdca0242a1ca8387a;This is now a customer portal feature , should this story be closed as redundant 
[~accountid:5a72dbfd9f949328111290a6]","07/Apr/22 8:46 AM;5a72dc0fdca0242a1ca8387a;Chokai items Cleanup 
Moving the story Chokai Ice box release bucket , so it's prioritized for a next release ",11/Apr/22 3:58 AM;5a72dbfd9f949328111290a6;We can close this,,,,,,,,,,,,,,,,,,,,,,,213616,MDBM-2723,Development Mode (Debug Mode),Done,11/Apr/22 4:32 AM
"Expose logs (Slow query log, error log etc) to customers.",DBAAS-4284,225842,New Feature,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Duplicate,Saravana Krishnamurthy,5a7740f1f8321921e181f3ff,Saravana Krishnamurthy,5a7740f1f8321921e181f3ff,Saravana Krishnamurthy,5a7740f1f8321921e181f3ff,23/Jun/20 6:48 PM,22/Apr/22 7:46 AM,,19/Mar/21 7:32 AM,,SkySQL_IceBox,,N/A,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,MDBM-1410,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@66abd9b9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzwct3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2021-03-01 09:41:29.0,2021-03-01 09:41:29.0,2021-03-01 09:41:29.0,1_*:*_1_*:*_23201034000_*|*_6_*:*_1_*:*_0,25/Feb/21 3:02 PM;5a7740f1f8321921e181f3ff;[~accountid:602f387c9f84a9006900aa0e],"01/Mar/21 1:41 AM;5a72dbfd9f949328111290a6;[~accountid:5a7740f1f8321921e181f3ff] The linked feature MDBM-1410 holds the full requirements for the database logs. 
Let's close this one.","18/Mar/21 12:46 PM;602f387c9f84a9006900aa0e;[~accountid:5a72dbfd9f949328111290a6] , so lets close pls",,,,,,,,,,,,,,,,,,,,,,,,,,Done,19/Mar/21 7:32 AM
Monitoring Data collection to be enabled on demand.,DBAAS-2229,219443,New Feature,Open,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,,,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Ivan Zlatoustov,5a72dbfd9f949328111290a6,22/Jan/20 4:23 AM,27/Jul/20 7:21 AM,,,,Pending Prioritization,,SkySQL Customer Portal,,,0,productFeature,,,,"Turn on monitoring metrics collection on-demand in SkySQL.
As a customer, I should be able to turn on monitoring metrics collection on demand. 
In a production environment having metrics collection plugins (audit plugin, query profiling etc.) by default would have a significant impact on the performance. 

As a customer, I should have the option to turn on specific metrics data collection on from the server on demand for a set period of time (1 hr or 1week ). 
i.e to debug production or performance issues. 
This time period should be configured from 10 minutes to 1 month. 

If the metrics collection is completely disabled, the corresponding not used resources ( i.e. side-car containers, exporters, should be reconfigured (or even discarded) to allow for maximum utilization of CPU/Memory resources in the Pod. 

As a customer, I should be able to selectively turn on various metrics collection.
For example, I should be given the option to turn on only the audit plugin or only slow query log or any combination of logs/plugins.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@68e41ec0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hztsxb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,
"Logs - to be or not to be (shown to the customer), that is the question",DBAAS-1423,219367,Story,Open,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,,Ivan Zlatoustov,5a72dbfd9f949328111290a6,Ben Stillman,557058:b69ec727-8802-427c-9ed3-6ca5c00f13ea,Ben Stillman,557058:b69ec727-8802-427c-9ed3-6ca5c00f13ea,26/Sep/19 8:50 AM,12/Aug/20 3:33 AM,,,,,,SkySQL Customer Portal,,,0,beta1internal,SkySQLMVP,UI,,"During the internal beta, Jacob submitted this feedback: 

{code:java}
It is unclear how logs would be accessed
{code}

As of right now, there's no method and no future plan to present any logs to the end user. Should they be? I think so, especially the error and slow query logs. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3f9b4f5e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzul73:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2020-08-11 21:28:47.0,2020-08-11 21:28:47.0,2020-08-11 21:28:47.0,,11/Aug/20 2:28 PM;5a7740f1f8321921e181f3ff;[~accountid:5e66a51e77d46c0cf93ad5f5] Assigning this to Buff to prioritize.,"12/Aug/20 3:33 AM;5a72dbfd9f949328111290a6;This exists as feature https://jira.mariadb.org/browse/MDBM-1410
The logs are often requested feature but it couldn't find a place in this release. 
My take is: 
We should have UI version of the logs for quick access of the logs but secured (anonymized parameters)
Monitoring Administrators should be able to download the actual logs.  
",,,,,,,,,,,,,,,,,,,,,,,,223087,DBAAS-1240,Placeholder for logging/tracking SkySQL  MVP 1 Beta 1 Internal customer isssues,To Do,
Update SkySQL MariaDB Server my.cnf to move binary/relay logs to a separate folder,DBAAS-1244,223134,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Do,Scott Nemes,6102cb3a75ad960069e668af,Scott Nemes,6102cb3a75ad960069e668af,Scott Nemes,6102cb3a75ad960069e668af,12/Sep/19 9:12 AM,22/Jun/20 2:56 PM,,22/Jun/20 2:56 PM,,N/A,,SkySQL MVP,,,0,backlog,SkySQLMVP,,,"We need to move the binary/relay logs to a different PVC from the data directory. The first step of this is to update the my.cnf to place the logs into a different folder. This will also require moving the data directory, so that the log subfolder does not look like a database.

https://github.com/mariadb-corporation/mariadb-enterprise-server-docker/blob/master/my.cnf

{code:java}
datadir = /mariadb/data
log_bin = /mariadb/log/mariadb-bin
log_bin_index = /mariadb/log/mariadb-bin.index
relay_log = /mariadb/log/mariadb-relay
relay_log_index = /mariadb/log/mariadb-relay.index
innodb_log_group_home_dir = /mariadb/log
log_error = /mariadb/log/mariadb-error.log
slow_query_log_file = /mariadb/log/mariadb-slow.log
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,DBAAS-1245,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1aa7b3e6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzui07:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2019-09-17 12:33:30.0,2019-09-17 12:33:30.0,2019-09-17 12:33:30.0,1_*:*_1_*:*_24558259000_*|*_6_*:*_1_*:*_0,"17/Sep/19 5:33 AM;5a72dc154ab43429358cbaad;I have several questions here:
1. when doing a google snapshot during pod restart (WIP), should we also snapshot and recover this log volume?
2. from [~accountid:614badd8f1c17400683ba484]: what should be the size for this new volume? Should it be different for the different t-shirst? When we tell a client they have 100GB, will it include the logs volume?",17/Sep/19 7:18 AM;6102cb3a75ad960069e668af;[~accountid:5a72dc154ab43429358cbaad] [~accountid:614badd8f1c17400683ba484] We still have a lot to work out here; we might not even end up doing this. I just created the tickets and assigned them to myself as a place holder.,,,,,,,,,,,,,,,,,,,,,,,,225069,DBAAS-2860,Service Stability Phase 2,Done,22/Jun/20 2:56 PM
"mariadb-operator: remove ""enable logs"" logic from mariadb server topologies",DBAAS-871,222971,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Fix,Petko Vasilev,5a72dc154ab43429358cbaad,Scott Nemes,6102cb3a75ad960069e668af,Scott Nemes,6102cb3a75ad960069e668af,18/Jun/19 7:22 PM,24/Jul/20 8:02 AM,,25/Jul/19 5:56 AM,,0.2.0,,SkySQL Operator,,,0,,,,,"Currently in the ""start-mariadb-instance.sh"" file, there is this:

{code:java}
if [[ ""$ENABLE_LOGS"" == ""1"" ]]; then
    chown -R mysql:mysql /var/log/mysql/
    cp /mnt/config-map/mariadb-log.cnf /etc/mysql/conf.d/server-log.cnf
fi
{code}


Which places this config:

{code:java}
[mysqld]
pid-file = /var/run/mysqld/mysqld.pid

[mariadb]
log_output=FILE
general_log
general_log_file=/var/log/mysql/mariadb.log
slow_query_log
slow_query_log_file=/var/log/mysql/mariadb-slow.log
long_query_time=1
{code}

This is not needed, because A) we will be enabling the slow query log by default in the my.cnf (changes will happen when we get the custom SkySQL images), and B) we never want to enable the general log anyway.

So please:

1) Remove the above logic so that mariadb-log.cnf does not get copied over (can remove the file all together).

2) Remove the references to the ""ENABLE_LOGS"" setting from the topology YAMLS since that setting will no longer be needed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,DBAAS-885,DBAAS-886,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3205abb5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzu5z3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Sprint 29,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2019-06-24 10:05:12.0,2019-06-24 10:05:12.0,2019-06-24 10:05:12.0,1_*:*_1_*:*_458794000_*|*_6_*:*_3_*:*_40000_*|*_10099_*:*_4_*:*_36000_*|*_10110_*:*_1_*:*_7000_*|*_10045_*:*_3_*:*_980000_*|*_10100_*:*_1_*:*_271000_*|*_10017_*:*_2_*:*_2688333000,24/Jun/19 3:05 AM;5a72dc154ab43429358cbaad;https://github.com/mariadb-corporation/mariadb-operator/pull/54,"25/Jul/19 5:56 AM;5a72dc154ab43429358cbaad;after discussion with [~accountid:5a72dbe40a1b9c21e2d9e068], we are not doing this for the moment",25/Jul/19 7:26 AM;6102cb3a75ad960069e668af;[~accountid:5a72dc154ab43429358cbaad] [~accountid:5a72dbe40a1b9c21e2d9e068] [~accountid:5a72dc0fdca0242a1ca8387a] This needs to be removed for SkySQL at least. We do not want this overriding our config.,,,,,,,,,,,,,,,,,,,,,,,222986,DBAAS-884,SkySQLMVP:Stabilty - Phase 1 ,Done,25/Jul/19 5:56 AM
Add a monitoring log (capture all logging) (FluentD integration only),DBAAS-231,222470,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Fix,Petko Vasilev,5a72dc154ab43429358cbaad,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,14/Jun/18 4:08 PM,27/Jul/20 6:30 AM,,14/Jan/19 2:33 PM,,N/A,,SkySQL Images,,,0,,,,,Try to get fluentd monitoring a mariadb slow query log and send it through and explain filter.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1d299880,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzswjj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,DBAAS Time to Joy(Sprint 6),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2018-06-20 13:41:30.0,2018-06-20 13:41:30.0,2018-06-20 13:41:30.0,1_*:*_1_*:*_295642000_*|*_6_*:*_1_*:*_0_*|*_10045_*:*_1_*:*_188808000_*|*_10100_*:*_1_*:*_18003058000,"20/Jun/18 6:41 AM;5a72dc154ab43429358cbaad;I got fluentd to read the slow query log of mariadb and do explain on it.
I'm not sure what is the deliverable here and how it's going to be tested.",,,,,,,,,,,,,,,,,,,,,,,,,222390,DBAAS-213,Query log classifier,Done,14/Jan/19 2:33 PM
Prepare consolidate cluster-wide statistics view,DBAAS-191,222372,Story,Closed,DBAAS,Legacy DBAAS,software,Bryan Alsdorf,5de9acd105eece0d09211146,,,Major,Won't Fix,,,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,Nedyalko Petrov,5a72dc0fdca0242a1ca8387a,29/May/18 6:35 AM,08/Jan/24 11:38 AM,,13/Jan/19 9:35 PM,,N/A,,N/A,,,0,,,,,"Add cluster related statistics: 
- databases and sizes
- number of queries/sec 
- number of failed queries/ - e.g. - avg. per 5 secs
- slow query log/ e.g  - avg. per 5 secs
- concurrent connections 
--- etc
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@46112443,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|hzt0xz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,26/Dec/18 12:00 AM,13/Dec/18 12:00 AM,83b6831c-f9c4-4802-9faf-0972ff73a8d1-50,ClouldTrial/SkySql,,,,,,,,,,,,,,,,,2019-01-14 05:35:03.0,2019-01-14 05:35:03.0,2019-01-14 05:35:03.0,1_*:*_1_*:*_19843157000_*|*_6_*:*_1_*:*_0,13/Jan/19 9:35 PM;611284e0e6e6f800715d65df;Surplus legacy ticket so closing as won't fix.,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,13/Jan/19 9:35 PM
Browse the Database Nodes with metrics collected and Select the Reports to be generated,CENG-349,252750,Story,In Progress,CENG,Customer Engineering,software,Ricardo Galvan,61ce48bfbce5e00069f69eff,,,Major,,Nirav Upadhyay,712020:1a462e2d-b6e7-4a04-81a2-4a5b8451d98d,Nirav Upadhyay,712020:1a462e2d-b6e7-4a04-81a2-4a5b8451d98d,Nirav Upadhyay,712020:1a462e2d-b6e7-4a04-81a2-4a5b8451d98d,26/Nov/25 11:50 PM,27/Nov/25 2:28 PM,,,,,,,,,0,,,,,"As tool user, I want to view all the database nodes for which metrics have been collected along with their basic info. such as Node name, IP, MariaDB version, Health summary etc. displayed on the tool’s Dashboard web-page. Along with that I want ability to select reports to generate for each node or for all the nodes combined.

*Database Nodes List Display:*

* Dashboard displays all database nodes that have metrics collected (.mdbs files)
* Each node card/row shows:
** Node name
** IP address
** MariaDB version / MaxScale version
** Overall Health Summary with some health status indicator
* Nodes are displayed in a grid (card view) or table format

*Report Selection:*

* Each node card has a ""Generate Reports"" button or dropdown
* Clicking the button shows a list of all available report types:
** Configuration Details (Appendix A)
** Slow Query Log Analysis (Appendix B)
** Security Analysis (Appendix C)
** Dataset Analysis (Appendix D)
** Galera Cluster Analysis (Appendix G)
** MaxScale Analysis (Appendix M)
** ColumnStore Analysis (Appendix CS)
** Performance & Security Audit (Extended)
** Sales Health Check (Metrics-Based)
** Sales Health Check (Text Input)
* User can select one or multiple reports to generate
* Selected reports are generated and displayed in a new view
* Option to ""Generate All Reports"" for a node
* Tooltips explaining each report type

*Search and Filter:*

* Search box to filter nodes by Name or IP address
* Filter by MariaDB version / MaxScale version (dropdown)
* Sort nodes by name, version
* Future ability to filter by other criteria",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@472c1763,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2|i03d6f:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,252751,CENG-350,MariaDB Health Check Framework - Web Based Analyzer and Reporting Engine,In Progress,27/Nov/25 2:28 PM
